{
  "version": 3,
  "sources": ["../node_modules/downloadjs/download.js", "../node_modules/undo-manager/lib/undomanager.js", "../node_modules/quicksettings/quicksettings.min.js", "../lib/contextmenu/contextmenu.js", "../package.json", "../src/utils.ts", "../src/class.coord.ts", "../src/class.area.ts", "../src/class.image-map.ts", "../src/p5.bg-layer.ts", "../src/class.selection.ts", "../src/p5.image-map-creator.ts"],
  "sourcesContent": ["//download.js v4.2, by dandavis; 2008-2016. [MIT] see http://danml.com/download.html for tests/usage\n// v1 landed a FF+Chrome compat way of downloading strings to local un-named files, upgraded to use a hidden frame and optional mime\n// v2 added named files via a[download], msSaveBlob, IE (10+) support, and window.URL support for larger+faster saves than dataURLs\n// v3 added dataURL and Blob Input, bind-toggle arity, and legacy dataURL fallback was improved with force-download mime and base64 support. 3.1 improved safari handling.\n// v4 adds AMD/UMD, commonJS, and plain browser support\n// v4.1 adds url download capability via solo URL argument (same domain/CORS only)\n// v4.2 adds semantic variable names, long (over 2MB) dataURL support, and hidden by default temp anchors\n// https://github.com/rndme/download\n\n(function (root, factory) {\n\tif (typeof define === 'function' && define.amd) {\n\t\t// AMD. Register as an anonymous module.\n\t\tdefine([], factory);\n\t} else if (typeof exports === 'object') {\n\t\t// Node. Does not work with strict CommonJS, but\n\t\t// only CommonJS-like environments that support module.exports,\n\t\t// like Node.\n\t\tmodule.exports = factory();\n\t} else {\n\t\t// Browser globals (root is window)\n\t\troot.download = factory();\n  }\n}(this, function () {\n\n\treturn function download(data, strFileName, strMimeType) {\n\n\t\tvar self = window, // this script is only for browsers anyway...\n\t\t\tdefaultMime = \"application/octet-stream\", // this default mime also triggers iframe downloads\n\t\t\tmimeType = strMimeType || defaultMime,\n\t\t\tpayload = data,\n\t\t\turl = !strFileName && !strMimeType && payload,\n\t\t\tanchor = document.createElement(\"a\"),\n\t\t\ttoString = function(a){return String(a);},\n\t\t\tmyBlob = (self.Blob || self.MozBlob || self.WebKitBlob || toString),\n\t\t\tfileName = strFileName || \"download\",\n\t\t\tblob,\n\t\t\treader;\n\t\t\tmyBlob= myBlob.call ? myBlob.bind(self) : Blob ;\n\t  \n\t\tif(String(this)===\"true\"){ //reverse arguments, allowing download.bind(true, \"text/xml\", \"export.xml\") to act as a callback\n\t\t\tpayload=[payload, mimeType];\n\t\t\tmimeType=payload[0];\n\t\t\tpayload=payload[1];\n\t\t}\n\n\n\t\tif(url && url.length< 2048){ // if no filename and no mime, assume a url was passed as the only argument\n\t\t\tfileName = url.split(\"/\").pop().split(\"?\")[0];\n\t\t\tanchor.href = url; // assign href prop to temp anchor\n\t\t  \tif(anchor.href.indexOf(url) !== -1){ // if the browser determines that it's a potentially valid url path:\n        \t\tvar ajax=new XMLHttpRequest();\n        \t\tajax.open( \"GET\", url, true);\n        \t\tajax.responseType = 'blob';\n        \t\tajax.onload= function(e){ \n\t\t\t\t  download(e.target.response, fileName, defaultMime);\n\t\t\t\t};\n        \t\tsetTimeout(function(){ ajax.send();}, 0); // allows setting custom ajax headers using the return:\n\t\t\t    return ajax;\n\t\t\t} // end if valid url?\n\t\t} // end if url?\n\n\n\t\t//go ahead and download dataURLs right away\n\t\tif(/^data:([\\w+-]+\\/[\\w+.-]+)?[,;]/.test(payload)){\n\t\t\n\t\t\tif(payload.length > (1024*1024*1.999) && myBlob !== toString ){\n\t\t\t\tpayload=dataUrlToBlob(payload);\n\t\t\t\tmimeType=payload.type || defaultMime;\n\t\t\t}else{\t\t\t\n\t\t\t\treturn navigator.msSaveBlob ?  // IE10 can't do a[download], only Blobs:\n\t\t\t\t\tnavigator.msSaveBlob(dataUrlToBlob(payload), fileName) :\n\t\t\t\t\tsaver(payload) ; // everyone else can save dataURLs un-processed\n\t\t\t}\n\t\t\t\n\t\t}else{//not data url, is it a string with special needs?\n\t\t\tif(/([\\x80-\\xff])/.test(payload)){\t\t\t  \n\t\t\t\tvar i=0, tempUiArr= new Uint8Array(payload.length), mx=tempUiArr.length;\n\t\t\t\tfor(i;i<mx;++i) tempUiArr[i]= payload.charCodeAt(i);\n\t\t\t \tpayload=new myBlob([tempUiArr], {type: mimeType});\n\t\t\t}\t\t  \n\t\t}\n\t\tblob = payload instanceof myBlob ?\n\t\t\tpayload :\n\t\t\tnew myBlob([payload], {type: mimeType}) ;\n\n\n\t\tfunction dataUrlToBlob(strUrl) {\n\t\t\tvar parts= strUrl.split(/[:;,]/),\n\t\t\ttype= parts[1],\n\t\t\tdecoder= parts[2] == \"base64\" ? atob : decodeURIComponent,\n\t\t\tbinData= decoder( parts.pop() ),\n\t\t\tmx= binData.length,\n\t\t\ti= 0,\n\t\t\tuiArr= new Uint8Array(mx);\n\n\t\t\tfor(i;i<mx;++i) uiArr[i]= binData.charCodeAt(i);\n\n\t\t\treturn new myBlob([uiArr], {type: type});\n\t\t }\n\n\t\tfunction saver(url, winMode){\n\n\t\t\tif ('download' in anchor) { //html5 A[download]\n\t\t\t\tanchor.href = url;\n\t\t\t\tanchor.setAttribute(\"download\", fileName);\n\t\t\t\tanchor.className = \"download-js-link\";\n\t\t\t\tanchor.innerHTML = \"downloading...\";\n\t\t\t\tanchor.style.display = \"none\";\n\t\t\t\tdocument.body.appendChild(anchor);\n\t\t\t\tsetTimeout(function() {\n\t\t\t\t\tanchor.click();\n\t\t\t\t\tdocument.body.removeChild(anchor);\n\t\t\t\t\tif(winMode===true){setTimeout(function(){ self.URL.revokeObjectURL(anchor.href);}, 250 );}\n\t\t\t\t}, 66);\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\t// handle non-a[download] safari as best we can:\n\t\t\tif(/(Version)\\/(\\d+)\\.(\\d+)(?:\\.(\\d+))?.*Safari\\//.test(navigator.userAgent)) {\n\t\t\t\tif(/^data:/.test(url))\turl=\"data:\"+url.replace(/^data:([\\w\\/\\-\\+]+)/, defaultMime);\n\t\t\t\tif(!window.open(url)){ // popup blocked, offer direct download:\n\t\t\t\t\tif(confirm(\"Displaying New Document\\n\\nUse Save As... to download, then click back to return to this page.\")){ location.href=url; }\n\t\t\t\t}\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\t//do iframe dataURL download (old ch+FF):\n\t\t\tvar f = document.createElement(\"iframe\");\n\t\t\tdocument.body.appendChild(f);\n\n\t\t\tif(!winMode && /^data:/.test(url)){ // force a mime that will download:\n\t\t\t\turl=\"data:\"+url.replace(/^data:([\\w\\/\\-\\+]+)/, defaultMime);\n\t\t\t}\n\t\t\tf.src=url;\n\t\t\tsetTimeout(function(){ document.body.removeChild(f); }, 333);\n\n\t\t}//end saver\n\n\n\n\n\t\tif (navigator.msSaveBlob) { // IE10+ : (has Blob, but not a[download] or URL)\n\t\t\treturn navigator.msSaveBlob(blob, fileName);\n\t\t}\n\n\t\tif(self.URL){ // simple fast and modern way using Blob and URL:\n\t\t\tsaver(self.URL.createObjectURL(blob), true);\n\t\t}else{\n\t\t\t// handle non-Blob()+non-URL browsers:\n\t\t\tif(typeof blob === \"string\" || blob.constructor===toString ){\n\t\t\t\ttry{\n\t\t\t\t\treturn saver( \"data:\" +  mimeType   + \";base64,\"  +  self.btoa(blob)  );\n\t\t\t\t}catch(y){\n\t\t\t\t\treturn saver( \"data:\" +  mimeType   + \",\" + encodeURIComponent(blob)  );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Blob but not URL support:\n\t\t\treader=new FileReader();\n\t\t\treader.onload=function(e){\n\t\t\t\tsaver(this.result);\n\t\t\t};\n\t\t\treader.readAsDataURL(blob);\n\t\t}\n\t\treturn true;\n\t}; /* end download() */\n}));\n", "/*\nSimple JavaScript undo and redo.\nhttps://github.com/ArthurClemens/JavaScript-Undo-Manager\n*/\n\n(function () {\n  'use strict';\n\n  function removeFromTo(array, from, to) {\n    array.splice(\n      from,\n      !to ||\n        1 +\n          to -\n          from +\n          (!((to < 0) ^ (from >= 0)) && (to < 0 || -1) * array.length),\n    );\n    return array.length;\n  }\n\n  let UndoManager = function () {\n    let commands = [],\n      index = -1,\n      limit = 0,\n      isExecuting = false,\n      callback;\n\n    /**\n     * Executes a single command.\n     * @property {object} command        - Command\n     * @property {function} command.undo - Undo function\n     * @property {function} command.redo - Redo function\n     * @property {string} action         - \"undo\" or \"redo\"\n     */\n    function execute(command, action) {\n      if (!command || typeof command[action] !== 'function') {\n        return this;\n      }\n      isExecuting = true;\n\n      command[action]();\n\n      isExecuting = false;\n      return this;\n    }\n\n    return {\n      /**\n       * Adds a command to the queue.\n       * @property {object} command           - Command\n       * @property {function} command.undo    - Undo function\n       * @property {function} command.redo    - Redo function\n       * @property {string} [command.groupId] - Optional group id\n       */\n      add: function (command) {\n        if (isExecuting) {\n          return this;\n        }\n        // if we are here after having called undo,\n        // invalidate items higher on the stack\n        commands.splice(index + 1, commands.length - index);\n        commands.push(command);\n\n        // if limit is set, remove items from the start\n        if (limit && commands.length > limit) {\n          removeFromTo(commands, 0, -(limit + 1));\n        }\n\n        // set the current index to the end\n        index = commands.length - 1;\n        if (callback) {\n          callback();\n        }\n        return this;\n      },\n\n      /**\n       * Pass a function to be called on undo and redo actions.\n       * @property {function} callbackFunc - Callback function\n       */\n      setCallback: function (callbackFunc) {\n        callback = callbackFunc;\n      },\n\n      /**\n       * Performs undo: call the undo function at the current index and decrease the index by 1.\n       */\n      undo: function () {\n        let command = commands[index];\n        if (!command) {\n          return this;\n        }\n\n        const groupId = command.groupId;\n        while (command.groupId === groupId) {\n          execute(command, 'undo');\n          index -= 1;\n          command = commands[index];\n          if (!command || !command.groupId) break;\n        }\n\n        if (callback) {\n          callback();\n        }\n        return this;\n      },\n\n      /**\n       * Performs redo: call the redo function at the next index and increase the index by 1.\n       */\n      redo: function () {\n        let command = commands[index + 1];\n        if (!command) {\n          return this;\n        }\n\n        const groupId = command.groupId;\n        while (command.groupId === groupId) {\n          execute(command, 'redo');\n          index += 1;\n          command = commands[index + 1];\n          if (!command || !command.groupId) break;\n        }\n\n        if (callback) {\n          callback();\n        }\n        return this;\n      },\n\n      /**\n       * Clears the memory, losing all stored states. Resets the index.\n       */\n      clear: function () {\n        let prev_size = commands.length;\n\n        commands = [];\n        index = -1;\n\n        if (callback && prev_size > 0) {\n          callback();\n        }\n      },\n\n      /**\n       * Tests if any undo actions exist.\n       * @returns {boolean}\n       */\n      hasUndo: function () {\n        return index !== -1;\n      },\n\n      /**\n       * Tests if any redo actions exist.\n       * @returns {boolean}\n       */\n      hasRedo: function () {\n        return index < commands.length - 1;\n      },\n\n      /**\n       * Returns the list of queued commands.\n       * @param {string} [groupId] - Optionally filter commands by group ID\n       * @returns {array}\n       */\n      getCommands: function (groupId) {\n        return groupId ? commands.filter(c => c.groupId === groupId) : commands;\n      },\n\n      /**\n       * Returns the index of the actions list.\n       * @returns {number}\n       */\n      getIndex: function () {\n        return index;\n      },\n\n      /**\n       * Sets the maximum number of undo steps. Default: 0 (unlimited).\n       * @property {number} max - Maximum number of undo steps\n       */\n      setLimit: function (max) {\n        limit = max;\n      },\n    };\n  };\n\n  if (\n    typeof define === 'function' &&\n    typeof define.amd === 'object' &&\n    define.amd\n  ) {\n    // AMD. Register as an anonymous module.\n    define(function () {\n      return UndoManager;\n    });\n  } else if (typeof module !== 'undefined' && module.exports) {\n    module.exports = UndoManager;\n  } else {\n    window.UndoManager = UndoManager;\n  }\n})();\n", "!function(){function a(a,b){var d=c(\"div\",null,\"qs_label\",b);return d.innerHTML=a,d}function b(a,b,d,e){var f=c(\"input\",b,d,e);return f.type=a,f}function c(a,b,c,d){var e=document.createElement(a);if(e)return e.id=b,c&&(e.className=c),d&&d.appendChild(e),e}function d(){return navigator.userAgent.indexOf(\"rv:11\")!=-1||navigator.userAgent.indexOf(\"MSIE\")!=-1}function e(){var a=navigator.userAgent.toLowerCase();return!(a.indexOf(\"chrome\")>-1||a.indexOf(\"firefox\")>-1||a.indexOf(\"epiphany\")>-1)&&a.indexOf(\"safari/\")>-1}function f(){var a=navigator.userAgent.toLowerCase();return a.indexOf(\"edge\")>-1}function g(){var a=document.createElement(\"style\");a.innerText=i,document.head.appendChild(a),h=!0}var h=!1,i=\".qs_main{background-color:#dddddd;text-align:left;position:absolute;width:200px;font:12px sans-serif;box-shadow:5px 5px 8px rgba(0,0,0,0.35);user-select:none;-webkit-user-select:none;color:#000000;border:none}.qs_content{background-color:#cccccc;overflow-y:auto}.qs_title_bar{background-color:#eeeeee;user-select:none;-webkit-user-select:none;cursor:pointer;padding:5px;font-weight:bold;border:none;color:#000000}.qs_container{margin:5px;padding:5px;background-color:#eeeeee;border:none;position:relative}.qs_container_selected{border:none;background-color:#ffffff}.qs_range{-webkit-appearance:none;-moz-appearance:none;width:100%;height:17px;padding:0;margin:0;background-color:transparent;border:none;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box}.qs_range:focus{outline:none;border:none}.qs_range::-webkit-slider-runnable-track{width:100%;height:15px;cursor:pointer;background:#cccccc;-webkit-border-radius:0;-moz-border-radius:0;border-radius:0}.qs_range:focus::-webkit-slider-runnable-track{background:#cccccc}.qs_range::-webkit-slider-thumb{-webkit-appearance:none;height:15px;width:15px;-webkit-border-radius:0;-moz-border-radius:0;border-radius:0;background:#999999;cursor:pointer;margin-top:0}.qs_range::-moz-range-track{width:100%;height:15px;cursor:pointer;background:#cccccc;-webkit-border-radius:0;-moz-border-radius:0;border-radius:0}.qs_range::-moz-range-thumb{height:15px;width:15px;border:none;-webkit-border-radius:0;-moz-border-radius:0;border-radius:0;background:#999999;cursor:pointer}.qs_range::-ms-track{width:100%;height:15px;cursor:pointer;visibility:hidden;background:transparent}.qs_range::-ms-thumb{height:15px;width:15px;-webkit-border-radius:0;-moz-border-radius:0;border-radius:0;background:#999999;cursor:pointer;border:none}.qs_range::-ms-fill-lower{background:#cccccc;-webkit-border-radius:0;-moz-border-radius:0;border-radius:0}.qs_range:focus::-ms-fill-lower{background:#cccccc}.qs_range::-ms-fill-upper{background:#cccccc;-webkit-border-radius:0;-moz-border-radius:0;border-radius:0}.qs_range:focus::-ms-fill-upper{background:#cccccc}.qs_button{background-color:#f6f6f6;color:#000000;height:30px;border:1px solid #aaaaaa;font:12px sans-serif}.qs_button:active{background-color:#ffffff;border:1px solid #aaaaaa}.qs_button:focus{border:1px solid #aaaaaa;outline:none}.qs_checkbox{cursor:pointer}.qs_checkbox input{position:absolute;left:-99999px}.qs_checkbox span{height:16px;width:100%;display:block;text-indent:20px;background:url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAALklEQVQ4T2OcOXPmfwYKACPIgLS0NLKMmDVrFsOoAaNhMJoOGBioFwZkZUWoJgApdFaxjUM1YwAAAABJRU5ErkJggg==') no-repeat}.qs_checkbox input:checked+span{background:url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAvElEQVQ4T63Tyw2EIBAA0OFKBxBL40wDRovAUACcKc1IB1zZDAkG18GYZTmSmafzgTnnMgwchoDWGlJKheGcP3JtnPceCqCUAmttSZznuYtgchsXQrgC+77DNE0kUpPbmBOoJaBOIVQylnqWgAAeKhDve/AN+EaklJBzhhgjWRoJVGTbNjiOowAIret6a+4jYIwpX8aDwLIs74C2D0IIYIyVP6Gm898m9kbVm85ljHUTf16k4VUefkwDrxk+zoUEwCt0GbUAAAAASUVORK5CYII=') no-repeat}.qs_checkbox_label{position:absolute;top:7px;left:30px}.qs_label{margin-bottom:3px;user-select:none;-webkit-user-select:none;cursor:default;font:12px sans-serif}.qs_text_input{-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;width:100%;padding:0 0 0 5px;height:24px;border:1px inset #ffffff;background-color:#ffffff;color:#000000;font-size:12px}.qs_text_input:focus{outline:none;background:#ffffff;border:1px inset #ffffff}.qs_select{background:url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAp0lEQVRIS+2SsQ3FIAwF7RVYhA5mgQFhFuhYhJKWL0eKxI8SGylKZ0p4+OBsHGNM+HChAiS7qkgyBKrovaLeOxhjbgtxZ+cFtgelFMg5QwgBvPd/EO5sDbKAlBLUWo/8CjmL075zDmKMj6rEKbpCqBL9aqc4ZUQAhVbInBMQUXz5Vg/WfxOktXZsWWtZLds9uIqlqaH1NFV3jdhSJA47E1CAaE8ViYp+wGiWMZ/T+cgAAAAASUVORK5CYII=') no-repeat right #f6f6f6;-webkit-appearance:none;-moz-appearance:none;appearance:none;color:#000000;width:100%;height:24px;border:1px solid #aaaaaa;-webkit-border-radius:0;-moz-border-radius:0;border-radius:0;padding:0 5px;-moz-outline:none;font-size:14px}.qs_select option{font-size:14px}.qs_select::-ms-expand{display:none}.qs_select:focus{outline:none}.qs_number{height:24px}.qs_image{width:100%}.qs_progress{width:100%;height:15px;background-color:#cccccc;border:none;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box}.qs_progress_value{height:100%;background-color:#999999}.qs_textarea{-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;resize:vertical;width:100%;padding:3px 5px;border:1px inset #ffffff;background-color:#ffffff;color:#000000;font-size:12px}.qs_textarea:focus{outline:none;background:#ffffff;border:1px inset #ffffff}.qs_color{position:absolute;left:-999999px}.qs_color_label{width:100%;height:20px;display:block;border:1px solid #aaaaaa;cursor:pointer;padding:0 0 0 5px;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box}.qs_file_chooser{position:absolute;left:-999999px}.qs_file_chooser_label{background-color:#f6f6f6;color:#000000;height:30px;border:1px solid #aaaaaa;font:12px sans-serif;width:100%;display:block;cursor:pointer;padding:7px;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}\",j={_version:\"2.1\",_topZ:1,_panel:null,_titleBar:null,_content:null,_startX:0,_startY:0,_hidden:!1,_collapsed:!1,_controls:null,_keyCode:-1,_draggable:!0,_collapsible:!0,_globalChangeHandler:null,useExtStyleSheet:function(){h=!0},create:function(a,b,c,d){var e=Object.create(this);return e._init(a,b,c,d),e},destroy:function(){this._panel.parentElement&&this._panel.parentElement.removeChild(this._panel);for(var a in this)this[a]=null},_init:function(a,b,c,d){h||g(),this._bindHandlers(),this._createPanel(a,b,d),this._createTitleBar(c||\"QuickSettings\"),this._createContent()},_bindHandlers:function(){this._startDrag=this._startDrag.bind(this),this._drag=this._drag.bind(this),this._endDrag=this._endDrag.bind(this),this._doubleClickTitle=this._doubleClickTitle.bind(this),this._onKeyUp=this._onKeyUp.bind(this)},getValuesAsJSON:function(a){var b={};for(var c in this._controls)this._controls[c].getValue&&(b[c]=this._controls[c].getValue());return a&&(b=JSON.stringify(b)),b},setValuesFromJSON:function(a){\"string\"==typeof a&&(a=JSON.parse(a));for(var b in a)this._controls[b].setValue&&this._controls[b].setValue(a[b]);return this},saveInLocalStorage:function(a){return this._localStorageName=a,this._readFromLocalStorage(a),this},clearLocalStorage:function(a){return localStorage.removeItem(a),this},_saveInLocalStorage:function(a){localStorage.setItem(a,this.getValuesAsJSON(!0))},_readFromLocalStorage:function(a){var b=localStorage.getItem(a);b&&this.setValuesFromJSON(b)},_createPanel:function(a,b,d){this._panel=c(\"div\",null,\"qs_main\",d||document.body),this._panel.style.zIndex=++j._topZ,this.setPosition(a||0,b||0),this._controls={}},_createTitleBar:function(a){this._titleBar=c(\"div\",null,\"qs_title_bar\",this._panel),this._titleBar.textContent=a,this._titleBar.addEventListener(\"mousedown\",this._startDrag),this._titleBar.addEventListener(\"dblclick\",this._doubleClickTitle)},_createContent:function(){this._content=c(\"div\",null,\"qs_content\",this._panel)},_createContainer:function(){var a=c(\"div\",null,\"qs_container\");return a.addEventListener(\"focus\",function(){this.className+=\" qs_container_selected\"},!0),a.addEventListener(\"blur\",function(){var a=this.className.indexOf(\" qs_container_selected\");a>-1&&(this.className=this.className.substr(0,a))},!0),this._content.appendChild(a),a},setPosition:function(a,b){return this._panel.style.left=a+\"px\",this._panel.style.top=Math.max(b,0)+\"px\",this},setSize:function(a,b){return this._panel.style.width=a+\"px\",this._content.style.width=a+\"px\",this._content.style.height=b-this._titleBar.offsetHeight+\"px\",this},setWidth:function(a){return this._panel.style.width=a+\"px\",this._content.style.width=a+\"px\",this},setHeight:function(a){return this._content.style.height=a-this._titleBar.offsetHeight+\"px\",this},setDraggable:function(a){return this._draggable=a,this._draggable||this._collapsible?this._titleBar.style.cursor=\"pointer\":this._titleBar.style.cursor=\"default\",this},_startDrag:function(a){this._draggable&&(this._panel.style.zIndex=++j._topZ,document.addEventListener(\"mousemove\",this._drag),document.addEventListener(\"mouseup\",this._endDrag),this._startX=a.clientX,this._startY=a.clientY),a.preventDefault()},_drag:function(a){var b=parseInt(this._panel.style.left),c=parseInt(this._panel.style.top),d=a.clientX,e=a.clientY;this.setPosition(b+d-this._startX,c+e-this._startY),this._startX=d,this._startY=e,a.preventDefault()},_endDrag:function(a){document.removeEventListener(\"mousemove\",this._drag),document.removeEventListener(\"mouseup\",this._endDrag),a.preventDefault()},setGlobalChangeHandler:function(a){return this._globalChangeHandler=a,this},_callGCH:function(){this._localStorageName&&this._saveInLocalStorage(this._localStorageName),this._globalChangeHandler&&this._globalChangeHandler()},hide:function(){return this._panel.style.visibility=\"hidden\",this._hidden=!0,this},show:function(){return this._panel.style.visibility=\"visible\",this._panel.style.zIndex=++j._topZ,this._hidden=!1,this},toggleVisibility:function(){return this._hidden?this.show():this.hide(),this},setCollapsible:function(a){return this._collapsible=a,this._draggable||this._collapsible?this._titleBar.style.cursor=\"pointer\":this._titleBar.style.cursor=\"default\",this},collapse:function(){return this._panel.removeChild(this._content),this._collapsed=!0,this},expand:function(){return this._panel.appendChild(this._content),this._collapsed=!1,this},toggleCollapsed:function(){return this._collapsed?this.expand():this.collapse(),this},setKey:function(a){return this._keyCode=a.toUpperCase().charCodeAt(0),document.body.addEventListener(\"keyup\",this.onKeyUp),this},_onKeyUp:function(a){a.keyCode===this._keyCode&&this.toggleVisibility()},_doubleClickTitle:function(){this._collapsible&&this.toggleCollapsed()},removeControl:function(a){if(this._controls[a])var b=this._controls[a].container;return b&&b.parentElement&&b.parentElement.removeChild(b),this._controls[a]=null,this},enableControl:function(a){return this._controls[a]&&(this._controls[a].control.disabled=!1),this},disableControl:function(a){return this._controls[a]&&(this._controls[a].control.disabled=!0),this},hideControl:function(a){return this._controls[a]&&(this._controls[a].container.style.display=\"none\"),this},showControl:function(a){return this._controls[a]&&(this._controls[a].container.style.display=\"block\"),this},overrideStyle:function(a,b,c){return this._controls[a]&&(this._controls[a].control.style[b]=c),this},hideTitle:function(a){var b=this._controls[a].label;return b&&(b.style.display=\"none\"),this},showTitle:function(a){var b=this._controls[a].label;return b&&(b.style.display=\"block\"),this},hideAllTitles:function(){for(var a in this._controls){var b=this._controls[a].label;b&&(b.style.display=\"none\")}return this},showAllTitles:function(){for(var a in this._controls){var b=this._controls[a].label;b&&(b.style.display=\"block\")}return this},getValue:function(a){return this._controls[a].getValue()},setValue:function(a,b){return this._controls[a].setValue(b),this._callGCH(),this},addBoolean:function(a,d,e){var f=this._createContainer(),g=c(\"label\",null,\"qs_checkbox_label\",f);g.textContent=a,g.setAttribute(\"for\",a);var h=c(\"label\",null,\"qs_checkbox\",f);h.setAttribute(\"for\",a);var i=b(\"checkbox\",a,null,h);i.checked=d;c(\"span\",null,null,h);this._controls[a]={container:f,control:i,getValue:function(){return this.control.checked},setValue:function(a){this.control.checked=a,e&&e(a)}};var j=this;return i.addEventListener(\"change\",function(){e&&e(i.checked),j._callGCH()}),this},bindBoolean:function(a,b,c){return this.addBoolean(a,b,function(b){c[a]=b})},addButton:function(a,c){var d=this._createContainer(),e=b(\"button\",a,\"qs_button\",d);e.value=a,this._controls[a]={container:d,control:e};var f=this;return e.addEventListener(\"click\",function(){c&&c(e),f._callGCH()}),this},addColor:function(g,h,i){if(e()||f()||d())return this.addText(g,h,i);var j=this._createContainer(),k=a(\"<b>\"+g+\":</b> \"+h,j),l=b(\"color\",g,\"qs_color\",j);l.value=h||\"#ff0000\";var m=c(\"label\",null,\"qs_color_label\",j);m.setAttribute(\"for\",g),m.style.backgroundColor=l.value,this._controls[g]={container:j,control:l,colorLabel:m,label:k,title:g,getValue:function(){return this.control.value},setValue:function(a){this.control.value=a,this.colorLabel.style.backgroundColor=l.value,this.label.innerHTML=\"<b>\"+this.title+\":</b> \"+this.control.value,i&&i(a)}};var n=this;return l.addEventListener(\"input\",function(){k.innerHTML=\"<b>\"+g+\":</b> \"+l.value,m.style.backgroundColor=l.value,i&&i(l.value),n._callGCH()}),this},bindColor:function(a,b,c){return this.addColor(a,b,function(b){c[a]=b})},addDate:function(c,e,f){var g;if(e instanceof Date){var h=e.getFullYear(),i=e.getMonth()+1;i<10&&(i=\"0\"+i);var j=e.getDate();g=h+\"-\"+i+\"-\"+j}else g=e;if(d())return this.addText(c,g,f);var k=this._createContainer(),l=a(\"<b>\"+c+\"</b>\",k),m=b(\"date\",c,\"qs_text_input\",k);m.value=g||\"\",this._controls[c]={container:k,control:m,label:l,getValue:function(){return this.control.value},setValue:function(a){var b;if(a instanceof Date){var c=a.getFullYear(),d=a.getMonth()+1;d<10&&(d=\"0\"+d);var e=a.getDate();e<10&&(e=\"0\"+e),b=c+\"-\"+d+\"-\"+e}else b=a;this.control.value=b||\"\",f&&f(b)}};var n=this;return m.addEventListener(\"input\",function(){f&&f(m.value),n._callGCH()}),this},bindDate:function(a,b,c){return this.addDate(a,b,function(b){c[a]=b})},addDropDown:function(b,d,e){for(var f=this._createContainer(),g=a(\"<b>\"+b+\"</b>\",f),h=c(\"select\",null,\"qs_select\",f),i=0;i<d.length;i++){var j=c(\"option\");j.label=d[i],j.innerText=d[i],h.add(j)}var k=this;return h.addEventListener(\"change\",function(){var a=h.selectedIndex,b=h.options;e&&e({index:a,value:b[a].label}),k._callGCH()}),this._controls[b]={container:f,control:h,label:g,getValue:function(){var a=this.control.selectedIndex;return{index:a,value:this.control.options[a].label}},setValue:function(a){var b;b=null!=a.index?a.index:a;var c=this.control.options;this.control.selectedIndex=b,e&&e({index:b,value:c[b].label})}},this},bindDropDown:function(a,b,c){return this.addDropDown(a,b,function(b){c[a]=b.value})},addElement:function(b,c){var d=this._createContainer(),e=a(\"<b>\"+b+\"</b>\",d);return d.appendChild(c),this._controls[b]={container:d,label:e},this},addFileChooser:function(d,e,f,g){var h=this._createContainer(),i=a(\"<b>\"+d+\"</b>\",h),j=b(\"file\",d,\"qs_file_chooser\",h);f&&(j.accept=f);var k=c(\"label\",null,\"qs_file_chooser_label\",h);k.setAttribute(\"for\",d),k.textContent=e||\"Choose a file...\",this._controls[d]={container:h,control:j,label:i,getValue:function(){return this.control.files[0]}};var l=this;return j.addEventListener(\"change\",function(){j.files&&j.files.length&&(k.textContent=j.files[0].name,g&&g(j.files[0]),l._callGCH())}),this},addHTML:function(b,d){var e=this._createContainer(),f=a(\"<b>\"+b+\":</b> \",e),g=c(\"div\",null,null,e);return g.innerHTML=d,this._controls[b]={label:f,control:g,getValue:function(){return this.control.innerHTML},setValue:function(a){this.control.innerHTML=a}},this},addImage:function(b,d){var e=this._createContainer(),f=a(\"<b>\"+b+\"</b>\",e);return img=c(\"img\",null,\"qs_image\",e),img.src=d,this._controls[b]={container:e,control:img,label:f,getValue:function(){return this.control.src},setValue:function(a){this.control.src=a}},this},addRange:function(a,b,c,d,e,f){return this._addNumber(\"range\",a,b,c,d,e,f)},addNumber:function(a,b,c,d,e,f){return this._addNumber(\"number\",a,b,c,d,e,f)},_addNumber:function(c,e,f,g,h,i,j){var k=this._createContainer(),l=a(\"\",k),m=\"range\"===c?\"qs_range\":\"qs_text_input qs_number\",n=b(c,e,m,k);n.min=f||0,n.max=g||100,n.step=i||1,n.value=h||0,l.innerHTML=\"<b>\"+e+\":</b> \"+n.value,this._controls[e]={container:k,control:n,label:l,title:e,callback:j,getValue:function(){return parseFloat(this.control.value)},setValue:function(a){this.control.value=a,this.label.innerHTML=\"<b>\"+this.title+\":</b> \"+this.control.value,j&&j(parseFloat(a))}};var o=\"input\";\"range\"===c&&d()&&(o=\"change\");var p=this;return n.addEventListener(o,function(){l.innerHTML=\"<b>\"+e+\":</b> \"+n.value,j&&j(parseFloat(n.value)),p._callGCH()}),this},bindRange:function(a,b,c,d,e,f){return this.addRange(a,b,c,d,e,function(b){f[a]=b})},bindNumber:function(a,b,c,d,e,f){return this.addNumber(a,b,c,d,e,function(b){f[a]=b})},setRangeParameters:function(a,b,c,d){return this.setNumberParameters(a,b,c,d)},setNumberParameters:function(a,b,c,d){var e=this._controls[a],f=e.control.value;return e.control.min=b,e.control.max=c,e.control.step=d,e.control.value!==f&&e.callback&&e.callback(e.control.value),this},addPassword:function(a,b,c){return this._addText(\"password\",a,b,c)},bindPassword:function(a,b,c){return this.addPassword(a,b,function(b){c[a]=b})},addProgressBar:function(b,d,e,f){var g=this._createContainer(),h=a(\"\",g),i=c(\"div\",null,\"qs_progress\",g),j=c(\"div\",null,\"qs_progress_value\",i);return j.style.width=e/d*100+\"%\",\"numbers\"===f?h.innerHTML=\"<b>\"+b+\":</b> \"+e+\" / \"+d:\"percent\"===f?h.innerHTML=\"<b>\"+b+\":</b> \"+Math.round(e/d*100)+\"%\":h.innerHTML=\"<b>\"+b+\"</b>\",this._controls[b]={container:g,control:i,valueDiv:j,valueDisplay:f,label:h,value:e,max:d,title:b,getValue:function(){return this.value},setValue:function(a){this.value=Math.max(0,Math.min(a,this.max)),this.valueDiv.style.width=this.value/this.max*100+\"%\",\"numbers\"===this.valueDisplay?this.label.innerHTML=\"<b>\"+this.title+\":</b> \"+this.value+\" / \"+this.max:\"percent\"===this.valueDisplay&&(this.label.innerHTML=\"<b>\"+this.title+\":</b> \"+Math.round(this.value/this.max*100)+\"%\")}},this},setProgressMax:function(a,b){var c=this._controls[a];return c.max=b,c.value=Math.min(c.value,c.max),c.valueDiv.style.width=c.value/c.max*100+\"%\",\"numbers\"===c.valueDisplay?c.label.innerHTML=\"<b>\"+c.title+\":</b> \"+c.value+\" / \"+c.max:\"percent\"===c.valueDisplay?c.label.innerHTML=\"<b>\"+c.title+\":</b> \"+Math.round(c.value/c.max*100)+\"%\":c.label.innerHTML=\"<b>\"+c.title+\"</b>\",this},addText:function(a,b,c){return this._addText(\"text\",a,b,c)},_addText:function(d,e,f,g){var h,i=this._createContainer(),j=a(\"<b>\"+e+\"</b>\",i);\"textarea\"===d?(h=c(\"textarea\",e,\"qs_textarea\",i),h.rows=5):h=b(d,e,\"qs_text_input\",i),h.value=f||\"\",this._controls[e]={container:i,control:h,label:j,getValue:function(){return this.control.value},setValue:function(a){this.control.value=a,g&&g(a)}};var k=this;return h.addEventListener(\"input\",function(){g&&g(h.value),k._callGCH()}),this},bindText:function(a,b,c){return this.addText(a,b,function(b){c[a]=b})},addTextArea:function(a,b,c){return this._addText(\"textarea\",a,b,c)},setTextAreaRows:function(a,b){return this._controls[a].control.rows=b,this},bindTextArea:function(a,b,c){return this.addTextArea(a,b,function(b){c[a]=b})},addTime:function(c,e,f){var g;if(e instanceof Date){var h=e.getHours();h<10&&(h=\"0\"+h);var i=e.getMinutes();i<10&&(i=\"0\"+i);var j=e.getSeconds();j<10&&(j=\"0\"+j),g=h+\":\"+i+\":\"+j}else g=e;if(d())return this.addText(c,g,f);var k=this._createContainer(),l=a(\"<b>\"+c+\"</b>\",k),m=b(\"time\",c,\"qs_text_input\",k);m.value=g||\"\",this._controls[c]={container:k,control:m,label:l,getValue:function(){return this.control.value},setValue:function(a){var b;if(a instanceof Date){var c=a.getHours();c<10&&(c=\"0\"+c);var d=a.getMinutes();d<10&&(d=\"0\"+d);var e=a.getSeconds();e<10&&(e=\"0\"+e),b=c+\":\"+d+\":\"+e}else b=a;this.control.value=b||\"\",f&&f(b)}};var n=this;return m.addEventListener(\"input\",function(){f&&f(m.value),n._callGCH()}),this},bindTime:function(a,b,c){return this.addTime(a,b,function(b){c[a]=b})}};\"object\"==typeof exports&&\"object\"==typeof module?module.exports=j:\"function\"==typeof define&&define.amd?define(j):window.QuickSettings=j}();", "/**\r\n * Basic Context Menu - v0.0.1\r\n *\r\n * Copyright (c) 2015\r\n * Released under the MIT license.\r\n *\r\n * This is an extremely basic context menu library for JavaScript.\r\n * It has no dependencies.\r\n *\r\n * Usage:\r\n *\r\n * // The menu object contains a key along with an object describing\r\n * // the item, or a function which is called when the item is clicked.\r\n * //\r\n * // The key can be used to identify which menu option was clicked\r\n * // in an onSelect handler. The key is also used to perform actions,\r\n * // such as disable or enable, on the menu item.\r\n *\r\n * var menu = {\r\n *     // Basic menu option: Key and onSelect\r\n *     \"New\" : function( target ) { ... },\r\n *\r\n *     // More advanced options\r\n *     \"Open\" : {\r\n *         onSelect : function( target ) { ... },\r\n *         enabled : true, // Use false for disabled, default true\r\n *         text : \"Open...\", // Overrides the key, always use if array\r\n *         title : \"Open a file\" // Title attribute for menu item\r\n *     },\r\n *\r\n *     // More parameters in onSelect function\r\n *     \"Save\" : {\r\n *         // target : DOM object that was clicked to open menu\r\n *         // key : The key of the menu object, in this case, \"Save\"\r\n *         // item : DOM object of the menu item that was clicked\r\n *         onSelect : function( target, key, item ) {\r\n *             ...\r\n *         }\r\n *     }\r\n * }\r\n *\r\n * // A selector can be a CSS-like selector\r\n * selector = \".menus\";\r\n *\r\n * // Or a jQuery selector\r\n * selector = $( \".menus\" )\r\n *\r\n * // Or a DOM object\r\n * selector = document.getElementById( \"menu\" )\r\n *\r\n * // Or a NodeList\r\n * selector = document.getElementsByClassName( \"menus\" )\r\n *\r\n * // Attach a menu\r\n * ContextMenu.attach( selector, menu );\r\n *\r\n * // Attach menu with options\r\n * ContextMenu.attach( \".menus\", menu, {\r\n *     event : \"click\", // Any valid mouse/touch event\r\n *     position : \"bottom\", // One of bottom, top, left, right, or click\r\n *     horizontalOffset : 0, // Add horizontal offset to position of menu\r\n *     verticalOffset : 0, // Add vertical offset to position of menu\r\n * } );\r\n *\r\n * // Disable a menu item\r\n * ContextMenu.disable( selector, \"Close\" );\r\n *\r\n * // Enable a menu item\r\n * ContextMenu.enable( selector, \"Close\" );\r\n *\r\n */\r\n( function() {\r\n\t'use strict';\r\n\r\n\r\n\tvar conf = {\r\n\t\tevent : \"click\",\r\n\t\tposition : \"bottom\",\r\n\t\thorizontalOffset : 0,\r\n\t\tverticalOffset : 0,\r\n\t\tdata : {} \r\n\t};\r\n\r\n\t/**\r\n\t * Variable indicating if a menu is open\r\n\t * @type {boolean}\r\n\t */\r\n\tvar isOpen = false;\r\n\r\n\r\n\t/**\r\n\t * Target object of context menu. This is the DOM object clicked\r\n\t * on to open the context menu.\r\n\t * @type {HTMLElement}\r\n\t */\r\n\tvar target = null;\r\n\r\n\r\n\t/**\r\n\t * Class to apply to context menu\r\n\t * @type String\r\n\t */\r\n\tvar menuClassName = \"context-menu\";\r\n\r\n\r\n\t/**\r\n\t * Class to apply to conext menu items\r\n\t * @type String\r\n\t */\r\n\tvar itemClassName = \"context-menu-item\";\r\n\r\n\r\n\t/**\r\n\t * Class to apply to conext menu items which are disabled\r\n\t * @type String\r\n\t */\r\n\tvar itemClassNameDisabled = \"context-menu-item-disabled\";\r\n\r\n\r\n\t///////////////////////////////\r\n\t// Helper functions\r\n\t///////////////////////////////\r\n\r\n\t/**\r\n\t * Check if object is a function\r\n\t *\r\n\t * @param {Mixed} obj\r\n\t * @returns {boolean}\r\n\t */\r\n\tvar isFunction = function( obj ) {\r\n\t\treturn !!( obj && obj.constructor && obj.call && obj.apply );\r\n\t};\r\n\r\n\r\n\r\n\t/**\r\n\t * Check if object is a string\r\n\t *\r\n\t * @param {Mixed} obj\r\n\t * @returns {boolean}\r\n\t */\r\n\tvar isString = function( obj ) {\r\n\t\treturn ( typeof obj === 'string' || obj instanceof String );\r\n\t};\r\n\r\n\r\n\r\n\t/**\r\n\t * A super simple extend function. This is all that we need\r\n\t * for this library\r\n\t *\r\n\t * @param {Object}\r\n\t * @returns {Object}\r\n\t */\r\n\tvar extend = function( obj ) {\r\n\t\tvar length = arguments.length;\r\n\r\n\t\tif ( length < 2 || obj === null ) {\r\n\t\t\treturn obj;\r\n\t\t}\r\n\r\n\t\tfor ( var idx = 1; idx < length; idx++ ) {\r\n\t\t\tvar source = arguments[ idx ];\r\n\t\t\tfor ( var key in source ) {\r\n\t\t\t\tobj[ key ] = source[ key ];\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn obj;\r\n\t};\r\n\r\n\r\n\r\n\t/**\r\n\t * Get elements based on selector. The selector may be any of a\r\n\t * DOM element, a jQuery object, a css-selector string, or\r\n\t * a NodeList, likely retrieved from .querySelectorAll().\r\n\t *\r\n\t * @param {jQuery|NodeList|String|HTMLElement} selector\r\n\t * @returns {Array|jQuery|NodeList}\r\n\t */\r\n\tvar getElements = function( selector ) {\r\n\t\tvar elements = [];\r\n\r\n\t\tif ( typeof jQuery !== \"undefined\" && selector instanceof jQuery ) {\r\n\t\t\treturn selector;\r\n\t\t}\r\n\r\n\t\tif ( selector instanceof HTMLElement ) {\r\n\t\t\treturn [ selector ];\r\n\t\t}\r\n\r\n\t\tif ( isString( selector ) ) {\r\n\t\t\treturn document.querySelectorAll( selector );\r\n\t\t}\r\n\r\n\t\tif ( selector instanceof NodeList ) {\r\n\t\t\treturn selector;\r\n\t\t}\r\n\r\n\t\treturn elements;\r\n\t};\r\n\r\n\r\n\t///////////////////////////////\r\n\t// Private functions\r\n\t///////////////////////////////\r\n\r\n\r\n\t/**\r\n\t * Called when a context menu is requested.\r\n\t *\r\n\t * @param {Event} e\r\n\t */\r\n\tvar onContextMenu = function( e ) {\r\n\t\te.stopPropagation();\r\n\t\te.preventDefault();\r\n\r\n\t\ttarget = e.target;\r\n\t\tcloseContextMenu();\r\n\r\n\t\tif ( target.ctxMenu ) {\r\n\r\n\t\t\tvar menu = createContextMenu( target );\r\n\t\t\tdocument.body.appendChild( menu );\r\n\t\t\tisOpen = true;\r\n\r\n\t\t\t// On next tick, position menu. We can't do it right\r\n\t\t\t// away because width and height of menu needs to be computed\r\n\t\t\t// first.\r\n\t\t\tsetTimeout( function() {\r\n\t\t\t\t// Set up events to process or close context menu\r\n\t\t\t\twindow.addEventListener( \"click\", closeContextMenu );\r\n\t\t\t\twindow.addEventListener( \"resize\", closeContextMenu );\r\n\t\t\t\twindow.addEventListener( \"scroll\", closeContextMenu );\r\n\t\t\t\t\r\n\t\t\t\t// Position and display\r\n\t\t\t\tmenu.style.visibility = \"visible\";\r\n\t\t\t\tpositionContextMenu( e, target, menu );\r\n\t\t\t}, 1 );\r\n\t\t}\r\n\t};\r\n\r\n\r\n\r\n\t/**\r\n\t * Create context menu\r\n\t *\r\n\t * @param {HTMLElement} target The element user clicks on to get context menu\r\n\t * @returns {HTMLElement} The menu\r\n\t */\r\n\tvar createContextMenu = function( target ) {\r\n\t\tvar key;\r\n\r\n\t\tvar contextMenu = document.createElement( \"div\" );\r\n\t\tcontextMenu.className = menuClassName;\r\n\r\n\t\t// Initially hidden until we compute position\r\n\t\tcontextMenu.style.visibility = \"hidden\";\r\n\t\tcontextMenu.style.display = \"inline-block\";\r\n\r\n\t\tfor ( key in target.ctxMenu.menu ) {\r\n\t\t\tvar value = target.ctxMenu.menu[ key ];\r\n\r\n\t\t\tvar item = document.createElement( \"div\" );\r\n\t\t\titem.ctxMenu = {\r\n\t\t\t\tkey : key,\r\n\t\t\t\tenabled : value.enabled ? true : false\r\n\t\t\t};\r\n\r\n\t\t\tif ( item.ctxMenu.enabled ) {\r\n\t\t\t\titem.className = itemClassName;\r\n\t\t\t} else {\r\n\t\t\t\titem.className = itemClassNameDisabled;\r\n\t\t\t}\r\n\t\t\titem.innerHTML = value && value.label ? value.label : key;\r\n\r\n\t\t\t// Assign event listener\r\n\t\t\tif ( item.ctxMenu.enabled ) {\r\n\t\t\t\tif ( isFunction( value.onSelect ) ) {\r\n\t\t\t\t\titem.ctxMenu.onSelect = value.onSelect;\r\n\t\t\t\t} else {\r\n\t\t\t\t\titem.ctxMenu.onSelect = onSelect;\r\n\t\t\t\t}\r\n\r\n\t\t\t\titem.addEventListener( target.ctxMenu.event, function( e ) {\r\n\t\t\t\t\tthis.ctxMenu.onSelect( target, this.ctxMenu.key, item, target.ctxMenu.data );\r\n\t\t\t\t\tcloseContextMenu();\r\n\t\t\t\t} );\r\n\t\t\t}\r\n\r\n\t\t\tif ( value.title ) {\r\n\t\t\t\titem.title = value.title;\r\n\t\t\t}\r\n\r\n\t\t\tcontextMenu.appendChild( item );\r\n\t\t}\r\n\r\n\t\treturn contextMenu;\r\n\t};\r\n\r\n\r\n\r\n\t/**\r\n\t * Position the menu relative to the target\r\n\t *\r\n\t * @param {Event} e The event that triggered the display of context menu\r\n\t * @param {HTMLElement} target\r\n\t * @param {HTMLElement} menu\r\n\t */\r\n\tvar positionContextMenu = function( e, target, menu ) {\r\n\t\tvar left = 0;\r\n\t\tvar top = 0;\r\n\t\tvar targetBox = target.getBoundingClientRect();\r\n\t\tvar menuBox = menu.getBoundingClientRect();\r\n\r\n\t\t// Default position\r\n\t\tvar position = \"click\";\r\n\r\n\t\tif ( target.ctxMenu && target.ctxMenu.position ) {\r\n\t\t\tposition = target.ctxMenu.position;\r\n\t\t}\r\n\r\n\t\tif ( position === \"bottom\" ) {\r\n\t\t\t// Display below element, left aligned (what about RTL languages?)\r\n\t\t\tleft = targetBox.left + target.ctxMenu.horizontalOffset;\r\n\t\t\ttop = targetBox.bottom + target.ctxMenu.verticalOffset;\r\n\t\t} else if ( position === \"top\" ) {\r\n\t\t\t// Display above element, left aligned (what about RTL languages?)\r\n\t\t\tleft = targetBox.left + target.ctxMenu.horizontalOffset;\r\n\t\t\ttop = targetBox.top - menuBox.height + target.ctxMenu.verticalOffset;\r\n\t\t} else if ( position === \"right\" ) {\r\n\t\t\t// Display to the right of the element, aligned to the top\r\n\t\t\tleft = targetBox.left + targetBox.width + target.ctxMenu.horizontalOffset;\r\n\t\t\ttop = targetBox.top + target.ctxMenu.verticalOffset;\r\n\t\t} else if ( position === \"left\" ) {\r\n\t\t\t// Display to the left of the element, aligned to the top\r\n\t\t\tleft = targetBox.left - menuBox.width + target.ctxMenu.horizontalOffset;\r\n\t\t\ttop = targetBox.top + target.ctxMenu.verticalOffset;\r\n\t\t} else {\r\n\t\t\t// Display wherever the user clicked the mouse\r\n\t\t\tleft = e.clientX + target.ctxMenu.horizontalOffset;\r\n\t\t\ttop = e.clientY + target.ctxMenu.verticalOffset;\r\n\t\t}\r\n\r\n\t\t// Check if off screen\r\n\r\n\t\t// Too far to the left?\r\n\t\tif ( left < 0 ) {\r\n\t\t\tif ( target.ctxMenu.horizontalOffset >= 0 ) {\r\n\t\t\t\tleft = target.ctxMenu.horizontalOffset;\r\n\t\t\t} else {\r\n\t\t\t\tleft = 0;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// Too far up?\r\n\t\tif ( top < 0 ) {\r\n\t\t\tif ( target.ctxMenu.verticalOffset >= 0 ) {\r\n\t\t\t\ttop = target.ctxMenu.verticalOffset;\r\n\t\t\t} else {\r\n\t\t\t\ttop = 0;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// Too far to the right?\r\n\t\tif ( left + menuBox.width > document.body.clientWidth ) {\r\n\t\t\tif ( target.ctxMenu.horizontalOffset >= 0 ) {\r\n\t\t\t\tleft = document.body.clientWidth - menuBox.width;\r\n\t\t\t} else {\r\n\t\t\t\tleft = document.body.clientWidth - menuBox.width + target.ctxMenu.horizontalOffset;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// Too far to the bottom?\r\n\t\tif ( top + menuBox.height > document.body.clientHeight ) {\r\n\t\t\tif ( target.ctxMenu.verticalOffset >= 0 ) {\r\n\t\t\t\ttop = document.body.clientHeight - menuBox.height;\r\n\t\t\t} else {\r\n\t\t\t\ttop = document.body.clientHeight - menuBox.height + target.ctxMenu.verticalOffset;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// And finally, apply to positioning to the menu\r\n\t\tmenu.style.left = left + \"px\";\r\n\t\tmenu.style.top = top + \"px\";\r\n\t};\r\n\r\n\r\n\r\n\t/**\r\n\t * Default onSelect routine if client failed to pass one in\r\n\t *\r\n\t * @param {HTMLElement} target The DOM element which context menu is applied to\r\n\t * @param {String} key Key related to menu\r\n\t * @param {HTMLElement} item The item clicked\r\n\t */\r\n\tvar onSelect = function( target, key, item ) {\r\n\t\t// TODO: Maybe throw an event\r\n\t};\r\n\r\n\r\n\r\n\t/**\r\n\t * Close any context menus (there should be only one!) that\r\n\t * currently exist.\r\n\t */\r\n\tvar closeContextMenu = function() {\r\n\t\tvar idx = 0;\r\n\t\tvar elements = document.getElementsByClassName( menuClassName );\r\n\r\n\t\t// Remove event listeners. If they don't exist, nothing will happen.\r\n\t\twindow.removeEventListener( \"click\", closeContextMenu );\r\n\t\twindow.removeEventListener( \"resize\", closeContextMenu );\r\n\t\twindow.removeEventListener( \"scroll\", closeContextMenu );\r\n\r\n\t\tfor ( idx = 0; idx < elements.length; idx++ ) {\r\n\t\t\telements[ idx ].parentNode.removeChild( elements[ idx ] );\r\n\t\t}\r\n\t\tisOpen = false;\r\n\t};\r\n\r\n\r\n\r\n\t/**\r\n\t * Set the enabled state of a menu item\r\n\t * @param {jQuery|NodeList|String|HTMLElement} selector\r\n\t * @param {String|int} key Key in menu object\r\n\t * @param {boolean} enabled\r\n\t */\r\n\tvar setEnabledState = function( selector, key, enabled ) {\r\n\t\tvar idx = 0;\r\n\r\n\t\t// Get list of elements to attach context menu to\r\n\t\tvar elements = getElements( selector );\r\n\r\n\t\t// Disable each menu element\r\n\t\tfor ( idx = 0; idx < elements.length; idx++ ) {\r\n\t\t\tif ( elements[ idx ].ctxMenu.menu.hasOwnProperty( key ) ) {\r\n\t\t\t\telements[ idx ].ctxMenu.menu[ key ].enabled = enabled;\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\r\n\r\n\t/**\r\n\t * Normalize a menu structure so that all properties are present\r\n\t *\r\n\t * @param {Object} menu\r\n\t * @returns {Object}\r\n\t */\r\n\tvar normalizeMenu = function( menu ) {\r\n\t\tvar idx;\r\n\t\tvar itemDefaults = {\r\n\t\t\ttype: \"item\",\r\n\t\t\tenabled: true,\r\n\t\t\tlabel: \"\",\r\n\t\t\tonSelect: function() {},\r\n\t\t\ticon: \"\",  // This isn't used yet\r\n\t\t\ttitle: \"\"\r\n\t\t};\r\n\r\n\t\t// Quick normalization of menu object\r\n\t\tfor ( idx in menu ) {\r\n\t\t\t// Create copy of defaults\r\n\t\t\tvar dflt = extend( {}, itemDefaults );\r\n\t\t\t\r\n\t\t\tif ( ! menu[ idx ] ) {\r\n\t\t\t\tmenu[ idx ] = extend( dflt, { label : idx } );\r\n\t\t\t} else if ( isFunction( menu[ idx ] ) ) {\r\n\t\t\t\tmenu[ idx ] = extend( dflt, { label : idx, onSelect : menu[ idx ] } );\r\n\t\t\t} else {\r\n\t\t\t\tmenu[ idx ] = extend( dflt, menu[ idx ] );\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn menu;\r\n\t};\r\n\r\n\r\n\r\n\t///////////////////////////////\r\n\t// Public API\r\n\t///////////////////////////////\r\n\tvar ContextMenu = {\r\n\r\n\t\t/**\r\n\t\t * Attach a context menu to one or more elements. This is the\r\n\t\t * API that will be used most often.\r\n\t\t *\r\n\t\t * @param {jQuery|NodeList|HTMLElement|String} selector\r\n\t\t * @param {Array|Object} menu\r\n\t\t * @param {Object} options\r\n\t\t */\r\n\t\tattach : function( selector, menu, options ) {\r\n\t\t\tvar idx = 0;\r\n\r\n\t\t\tmenu = normalizeMenu( menu );\r\n\r\n\t\t\t// Create object to associate with element(s).\r\n\t\t\t// extend() is used so that each element gets a unique copy.\r\n\t\t\tvar obj = extend( { menu : extend( {}, menu ) }, conf, options );\r\n\r\n\t\t\t// Get list of elements to attach context menu to\r\n\t\t\tvar elements = getElements( selector );\r\n\r\n\t\t\t// Attach context menu to each element\r\n\t\t\tfor ( idx = 0; idx < elements.length; idx++ ) {\r\n\t\t\t\telements[ idx ].ctxMenu = obj;\r\n\t\t\t\telements[ idx ].addEventListener( obj.event, onContextMenu );\r\n\t\t\t}\r\n\t\t},\r\n\r\n\r\n\t\t\r\n\t\t/**\r\n\t\t * Display a context menu with an element or event. \r\n\t\t * Useful for when you don't want to attach the context\r\n\t\t * menu to a whole bunch of things but just display it\r\n\t\t * dynamically.\r\n\t\t * \r\n\t\t * @example\r\n\t\t *\t$( document ).on( \"click\", \".target-button\", function( e ) {\r\n\t\t *\t\tContextMenu.display( e.target, menu, { horizontalOffset : 5 } );\r\n\t\t *\t} );\r\n\t\t *\t\r\n\t\t * @example\r\n\t\t *\t$( document ).on( \"click\", \".target-button\", function( e ) {\r\n\t\t *\t\tContextMenu.display( e, menu, { horizontalOffset : 5 } );\r\n\t\t *\t} );\r\n\t\t * \r\n\t\t * @param {Event|HTMLElement} e\r\n\t\t * @param {Array|Object} menu\r\n\t\t * @param {Object} options\r\n\t\t */\r\n\t\tdisplay : function( e, menu, options ) {\r\n\t\t\tmenu = normalizeMenu( extend( {}, menu ) );\r\n\r\n\t\t\t// Create object to associate with element(s).\r\n\t\t\t// extend() is used so that we have a unique copy.\r\n\t\t\tvar contextMenu = extend( { menu : extend( {}, menu ) }, conf, options );\r\n\r\n\t\t\t// Is e a selector or an event?\r\n\t\t\tif ( e instanceof Event ) {\r\n\t\t\t\te.target.ctxMenu = contextMenu;\r\n\t\t\t\tonContextMenu( e );\r\n\t\t\t} else if ( typeof jQuery !== \"undefined\" && e instanceof jQuery.Event ) {\r\n\t\t\t\te.target.ctxMenu = contextMenu;\r\n\t\t\t\tonContextMenu( e );\r\n\t\t\t} else if ( e instanceof HTMLElement ) {\r\n\t\t\t\te.ctxMenu = contextMenu;\r\n\t\t\t\t\r\n\t\t\t\t// Create a simulated event\r\n\t\t\t\tvar box = e.getBoundingClientRect();\r\n\t\t\t\tvar evt = {\r\n\t\t\t\t\ttarget: e,\r\n\t\t\t\t\tclientX: box.left,\r\n\t\t\t\t\tclientY: box.top,\r\n\t\t\t\t\tstopPropagation: function() {},\r\n\t\t\t\t\tpreventDefault: function() {}\r\n\t\t\t\t}\r\n\t\t\t\tonContextMenu( evt );\r\n\t\t\t} else {\r\n\t\t\t\tconsole.log( e );\r\n\t\t\t}\r\n\t\t},\r\n\r\n\r\n\t\t/**\r\n\t\t * Disable a menu items\r\n\t\t *\r\n\t\t * @param {jQuery|NodeList|HTMLElement|String} selector\r\n\t\t * @param {String|int} key The key passed in to the menu object in .attach()\r\n\t\t */\r\n\t\tdisable : function( selector, key ) {\r\n\t\t\tsetEnabledState( selector, key, false );\r\n\t\t},\r\n\r\n\r\n\r\n\t\t/**\r\n\t\t * Disable a menu items\r\n\t\t *\r\n\t\t * @param {jQuery|NodeList|HTMLElement|String} selector\r\n\t\t * @param {String|int} key The key passed in to the menu object in .attach()\r\n\t\t */\r\n\t\tenable : function( selector, key ) {\r\n\t\t\tsetEnabledState( selector, key, true );\r\n\t\t},\r\n\r\n\r\n\r\n\t\t/**\r\n\t\t * Close context menu(s)\r\n\t\t */\r\n\t\tclose : function() {\r\n\t\t\tcloseContextMenu();\r\n\t\t},\r\n\r\n\r\n\r\n\t\t/**\r\n\t\t * Check if a context menu is open\r\n\t\t * @returns {boolean}\r\n\t\t */\r\n\t\tisOpen : function() {\r\n\t\t\treturn isOpen;\r\n\t\t}\r\n\t};\r\n\r\n\r\n\r\n\t/**\r\n\t * Expose\r\n\t */\r\n\t// AMD\r\n\tif ( typeof window.define === \"function\" && window.define.amd !== undefined ) {\r\n\t\twindow.define( 'ContextMenu', [], function () {\r\n\t\t\treturn ContextMenu;\r\n\t\t} );\r\n\t// CommonJS\r\n\t} else if ( typeof module !== \"undefined\" && module.exports !== undefined ) {\r\n\t\tmodule.exports = ContextMenu;\r\n\t// Browser\r\n\t} else {\r\n\t\twindow.ContextMenu = ContextMenu;\r\n\t}\r\n} )();\r\n", "{\r\n  \"name\": \"image-map-creator\",\r\n  \"version\": \"2.0.1\",\r\n  \"description\": \"This is a simple map creator tool made with the p5.js library. I want it\\r to be easy to use for both the end user and the developper.\",\r\n  \"module\": \"dist/p5.image-map-creator.mjs\",\r\n  \"main\": \"dist/p5.image-map-creator.js\",\r\n  \"types\": \"dist/src/p5.image-map-creator.d.ts\",\r\n  \"scripts\": {\r\n    \"test\": \"echo \\\"Error: no test specified\\\" && exit 1\",\r\n    \"dev\": \"esbuild src/p5.image-map-creator.ts --outfile=demos/image-map-creator.bundle.js --bundle --sourcemap --target=es2016\",\r\n    \"build\": \"esbuild src/p5.image-map-creator.ts --outfile=demos/image-map-creator.min.js --bundle --sourcemap --target=es2016 --minify\",\r\n    \"tes\": \"esbuild src/demos/index.html\"\r\n  },\r\n  \"repository\": {\r\n    \"type\": \"git\",\r\n    \"url\": \"git+https://github.com/n-peugnet/image-map-creator.git\"\r\n  },\r\n  \"keywords\": [],\r\n  \"author\": \"\",\r\n  \"license\": \"MIT\",\r\n  \"bugs\": {\r\n    \"url\": \"https://github.com/n-peugnet/image-map-creator/issues\"\r\n  },\r\n  \"homepage\": \"https://github.com/n-peugnet/image-map-creator#readme\",\r\n  \"devDependencies\": {\r\n    \"@types/downloadjs\": \"^1.4.2\",\r\n    \"@types/p5\": \"^1.4.2\",\r\n    \"esbuild\": \"^0.23.0\",\r\n    \"typescript\": \"^5.5.3\"\r\n  },\r\n  \"dependencies\": {\r\n    \"downloadjs\": \"^1.4.7\",\r\n    \"image-map-creator\": \"^2.0.1\",\r\n    \"quicksettings\": \"^3.0.1\",\r\n    \"undo-manager\": \"^1.0.5\"\r\n  }\r\n}\r\n", "export function between(val: number, refA: number, refB: number, included = true): boolean {\r\n\tif (refA > refB) {\r\n\t\tlet refT = refA;\r\n\t\trefA = refB;\r\n\t\trefB = refT;\r\n\t}\r\n\treturn included ? val >= refA && val <= refB : val > refA && val < refB\r\n}\r\n\r\nexport function round(x: number, digits: number): number {\r\n\treturn parseFloat(x.toFixed(digits))\r\n}\r\n\r\nexport function openWindow(url: string, width = 400, height = 300): void {\r\n\twindow.open(url, \"_blank\", `width=${width},height=${height}`);\r\n}", "import { round } from \"./utils\";\r\nimport { Movable } from \"./interface.movable\";\r\n\r\ntype Axle = \"x\"|\"y\";\r\n\r\n/**\r\n * Class representing a 2d xy coordinate\r\n*/\r\nexport class Coord implements Movable {\r\n\r\n\tconstructor(\r\n\t\tpublic x: number = 0,\r\n\t\tpublic y: number = 0\r\n\t) {}\r\n\r\n\tset(x: number, y: number): this {\r\n\t\tthis.x = x;\r\n\t\tthis.y = y;\r\n\t\treturn this;\r\n\t}\r\n\r\n\tstatic fromObject(obj: Object): Coord {\r\n\t\treturn new Coord((<Coord>obj).x, (<Coord>obj).y);\r\n\t}\r\n\r\n\t/**\r\n\t * returns the distance between two xy coordinates\r\n\t * @param {Coord} coord1 \r\n\t * @param {Coord} coord2 \r\n\t */\r\n\tstatic dist(coord1: Coord, coord2: Coord): number {\r\n\t\treturn Math.sqrt(Math.pow(coord1.x - coord2.x, 2) + Math.pow(coord1.y - coord2.y, 2));\r\n\t}\r\n\r\n\t/**\r\n\t * Exchanges a value between two xy coordinates\r\n\t * @param {Coord} coord1 \r\n\t * @param {Coord} coord2 \r\n\t * @param {Axle} val\r\n\t */\r\n\tstatic swap(coord1: Coord, coord2: Coord, val: Axle): void {\r\n\t\tlet tmp = coord1[val];\r\n\t\tcoord1[val] = coord2[val];\r\n\t\tcoord2[val] = tmp;\r\n\t}\r\n\r\n\tisEmpty(): boolean {\r\n\t\treturn !this.x && !this.y;\r\n\t}\r\n\r\n\toneIsEmpty(): boolean {\r\n\t\treturn !this.x || !this.y\r\n\t}\r\n\r\n\t/**\r\n\t * returns the sum of two xy coordinates\r\n\t * @param {Coord} coord \r\n\t */\r\n\tsum(coord: Coord): Coord {\r\n\t\treturn new Coord(this.x + coord.x, this.y + coord.y);\r\n\t}\r\n\r\n\t/**\r\n\t * Add the value of the given coordinate to the current one\r\n\t * @param {Coord} coord \r\n\t */\r\n\tadd(coord: Coord): this {\r\n\t\tthis.x += coord.x;\r\n\t\tthis.y += coord.y;\r\n\t\treturn this;\r\n\t}\r\n\r\n\t/**\r\n\t * returns the difference of two xy coordinates\r\n\t * @param {Coord} coord \r\n\t */\r\n\tdiff(coord: Coord): Coord {\r\n\t\treturn new Coord(this.x - coord.x, this.y - coord.y);\r\n\t}\r\n\r\n\t/**\r\n\t * Substract the value of the given coordinate to the current one\r\n\t * @param {Coord} coord \r\n\t */\r\n\tsub(coord: Coord): this {\r\n\t\tthis.x -= coord.x;\r\n\t\tthis.y -= coord.y;\r\n\t\treturn this;\r\n\t}\r\n\r\n\t//------------------------ Start Interface Movable -------------------------------\r\n\t/**\r\n\t * Alias of add\r\n\t * @param {Coord} coord\r\n\t */\r\n\tmove(coord: Coord): void {\r\n\t\tthis.add(coord);\r\n\t}\r\n\r\n\tgetPosition(): Coord {\r\n\t\treturn this;\r\n\t}\r\n\r\n\tsetPosition(coord: Coord): this {\r\n\t\tthis.set(coord.x, coord.y);\r\n\t\treturn this;\r\n\t}\r\n\t//------------------------- End Interface Movable --------------------------------\r\n\r\n\tclone(): Coord {\r\n\t\treturn new Coord(this.x, this.y);\r\n\t}\r\n\r\n\tinvert(): Coord {\r\n\t\treturn new Coord(- this.x, -this.y);\r\n\t}\r\n\r\n\ttoStr(dec: number, val: Axle, scale: number): string {\r\n\t\treturn round(this[val] * scale, dec).toString();\r\n\t}\r\n\r\n\ttoHtml(dec: number, scale = 1): string {\r\n\t\treturn this.toStr(dec, \"x\", scale) + \",\" + this.toStr(dec, \"y\", scale);\r\n\t}\r\n\r\n}", "import { round } from \"./utils\";\r\nimport { Coord } from \"./class.coord\";\r\nimport { ImageMap } from \"./class.image-map\";\r\nimport type P5 from \"p5\";\r\n\r\nexport type Shape = \"empty\" | \"rect\" | \"circle\" | \"poly\" | \"default\";\r\n\r\nexport function makeid(length: number) {\r\n  let result: string = \"\";\r\n  const characters: string = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\";\r\n  const charactersLength = characters.length;\r\n  let counter: number = 0;\r\n  while (counter < length) {\r\n    result += characters.charAt(Math.floor(Math.random() * charactersLength));\r\n    counter += 1;\r\n  }\r\n  return result;\r\n}\r\n\r\nexport abstract class Area {\r\n\r\n\t/**\r\n\t * @param {Shape} shape the type of area\r\n\t * @param {Coord[]} coords the list of coordinates\r\n\t * @param {string} href the link this area is going to point to\r\n\t * @param {number} id the unique id\r\n\t */\r\n\tconstructor(\r\n\t\tprotected shape: Shape,\r\n\t\tprotected coords: Coord[] = [],\r\n\t\tprotected href: string = \"\",\r\n\t\tprotected title: string = \"\",\r\n\t\tpublic id: number = 0) {\r\n\t}\r\n\r\n\tstatic fromObject(o: Object): Area {\r\n\t\tswitch ((<Area>o).shape) {\r\n\t\t\tcase 'rect':\r\n\t\t\t\tconst r = o as AreaRect;\r\n\t\t\t\treturn new AreaRect(r.coords.map(Coord.fromObject), r.href, r.title, r.id);\r\n\t\t\tcase 'circle':\r\n\t\t\t\tconst c = o as AreaCircle\r\n\t\t\t\treturn new AreaCircle(c.coords.map(Coord.fromObject), c.radius, c.href, c.title, c.id);\r\n\t\t\tcase 'poly':\r\n\t\t\t\tconst p = o as AreaPoly\r\n\t\t\t\treturn new AreaPoly(p.coords.map(Coord.fromObject), p.href, p.title, p.id, p.closed);\r\n\t\t\tcase 'default':\r\n\t\t\t\tconst d = o as AreaDefault\r\n\t\t\t\treturn new AreaDefault(d.iMap, d.href, d.title);\r\n\t\t\tdefault:\r\n\t\t\t\tthrow 'Not an area'\r\n\t\t}\r\n\t}\r\n\r\n\tgetId(): number {\r\n\t\treturn this.id;\r\n\t}\r\n\r\n\tsetShape(shape: Shape): this {\r\n\t\tthis.shape = shape;\r\n\t\treturn this;\r\n\t}\r\n\r\n\tgetShape(): Shape {\r\n\t\treturn this.shape;\r\n\t}\r\n\r\n\t/**\r\n\t * Adds a coordinate to the coords array, and returns it's new length\r\n\t * @param {Coord} coord coordinate\r\n\t */\r\n\taddCoord(coord: Coord): number {\r\n\t\treturn this.coords.push(coord);\r\n\t}\r\n\r\n\tsetCoords(coords: Coord[]): this {\r\n\t\tthis.coords = coords;\r\n\t\treturn this;\r\n\t}\r\n\r\n\tgetCoords(): Coord[] {\r\n\t\treturn this.coords;\r\n\t}\r\n\r\n\t/**\r\n\t * Returns a copy of this area's coordinates list\r\n\t */\r\n\tdrawingCoords(): Coord[] {\r\n\t\treturn this.coords.slice();\r\n\t}\r\n\r\n\tgetPoints(): Coord[] {\r\n\t\treturn this.coords;\r\n\t}\r\n\r\n\tisEmpty(): boolean {\r\n\t\treturn this.coords.length == 0;\r\n\t}\r\n\r\n\t/**\r\n\t * @param {Area} area \r\n\t */\r\n\tequals(area: Area): boolean {\r\n\t\treturn this.id == area.id;\r\n\t}\r\n\r\n\t/**\r\n\t * Retuns a deep copy of this area's coordinates\r\n\t */\r\n\tcopyCoords(): Coord[] {\r\n\t\tlet copy: Coord[] = [];\r\n\t\tthis.coords.forEach((val, index) => {\r\n\t\t\tcopy[index] = new Coord(val.x, val.y);\r\n\t\t});\r\n\t\treturn copy;\r\n\t}\r\n\r\n\tupdateLastCoord(coord: Coord): this {\r\n\t\tthis.coords[this.coords.length - 1] = coord;\r\n\t\treturn this;\r\n\t}\r\n\r\n\t//------------------------ Start Interface Movable -------------------------------\r\n\tmove(coord: Coord): void {\r\n\t\tlet fcoord = this.firstCoord();\r\n\t\tif (coord != undefined) {\r\n\t\t\tfcoord.add(coord);\r\n\t\t}\r\n\t}\r\n\r\n\tgetPosition(): Coord {\r\n\t\treturn this.firstCoord();\r\n\t}\r\n\r\n\tsetPosition(coord: Coord): void {\r\n\t\tlet move = this.coords[0].diff(coord);\r\n\t\tthis.move(move);\r\n\t}\r\n\t//------------------------- End Interface Movable --------------------------------\r\n\r\n\tisValidShape(): boolean {\r\n\t\treturn this.isDrawable();\r\n\t}\r\n\r\n\t/**\r\n\t * @param {Coord} coord \r\n\t * @param {number} tolerance\r\n\t * @returns {Coord|false}\r\n\t */\r\n\tisOverPoint(coord: Coord, tolerance: number): Coord | false {\r\n\t\tlet point = this.getPoints().find(c => {\r\n\t\t\treturn Coord.dist(coord, c) < tolerance;\r\n\t\t});\r\n\t\treturn point ? point : false;\r\n\t}\r\n\r\n\tsetHref(url: string): this {\r\n\t\tthis.href = url;\r\n\t\treturn this;\r\n\t}\r\n\r\n\tgetHref(): string {\r\n\t\treturn this.href;\r\n\t}\r\n\r\n\tgetHrefVerbose(): string {\r\n\t\treturn this.href === \"\" ? \"undefined\" : this.href;\r\n\t}\r\n\r\n\tsetTitle(title: string): this {\r\n\t\tthis.title = title;\r\n\t\treturn this;\r\n\t}\r\n\r\n\tgetTitle(): string {\r\n\t\treturn this.title;\r\n\t}\r\n\r\n\tsetId(id: number): this {\r\n\t\tthis.id = id;\r\n\t\treturn this;\r\n\t}\r\n\r\n\tfirstCoord(): Coord {\r\n\t\treturn this.coords[0];\r\n\t}\r\n\r\n\thtmlCoords(dec: number, scale: number): string {\r\n\t\treturn this.drawingCoords().map(c => {\r\n\t\t\treturn c.toHtml(dec, scale);\r\n\t\t}).join(',');\r\n\t}\r\n\r\n\ttoHtml(scale: number = 1): string {\r\n\t\tlet htmlCoords = this.htmlCoords(0, scale);\r\n\t\thtmlCoords = htmlCoords ? `coords=\"${htmlCoords}\"` : \"\";\r\n\t\tconst href = this.href ? `href=\"${this.href}\"` : \"nohref\";\r\n\t\tconst title = this.title ? `title=\"${this.title}\"` : \"\";\r\n\t\treturn `<area shape=\"${this.shape}\" ${htmlCoords} ${href} alt=\"${this.href}\" ${title} />`;\r\n\t}\r\n\r\n\ttoSvg(scale = 1): string {\r\n\t\treturn `<a xlink:href=\"${this.href}\">${this.svgArea(scale)}</a>`;\r\n\t}\r\n  \r\n\ttoImf(scale: number = 1, index: number = 0): string {\r\n\t\tlet htmlCoords = this.htmlCoords(0, scale);\r\n\t\thtmlCoords = htmlCoords ? `objectCoordinates=\"${htmlCoords}\"` : \"\";\r\n\t\tconst title = this.title ? `icnObjectTitle=\"${this.title}\"` : \"\";\r\n    let i: string = ('000' + index);\r\n    i = i.substring(i.length-3);\r\n    return `<icnObject icnObjectIdent=\"hot-${i}\" ${htmlCoords} ${title} icnObjectType=\"${this.shape}\"/>`;\r\n\t}\r\n\r\n\tabstract isDrawable(): boolean;\r\n\tabstract svgArea(scale: number): string;\r\n\tabstract isOver(coord: Coord): boolean;\r\n\tabstract display(p: P5): void;\r\n}\r\n\r\nexport class AreaEmpty extends Area {\r\n\tconstructor() {\r\n\t\tsuper(\"empty\");\r\n\t}\r\n\tisDrawable(): boolean {\r\n\t\treturn false\r\n\t}\r\n\r\n\tsvgArea(scale: number): string {\r\n\t\treturn \"\";\r\n\t}\r\n\r\n\tisOver(coord: Coord): boolean {\r\n\t\treturn false;\r\n\t}\r\n\r\n\tdisplay(p: P5): void {}\r\n}\r\n\r\nexport class AreaCircle extends Area {\r\n\t/**\r\n\t * @param {Coord[]} coords the list of coordinates\r\n\t * @param {number} radius radius of the circle\r\n\t * @param {string} href the link this area is going to point to\r\n\t * @param {number} id the unique id\r\n\t */\r\n\tconstructor(\r\n\t\tcoords: Coord[] = [],\r\n\t\tpublic radius: number = 0,\r\n\t\thref: string = \"\",\r\n\t\ttitle: string = \"\",\r\n\t\tid: number = 0\r\n\t) {\r\n\t\tsuper(\"circle\", coords, href, title, id);\r\n\t}\r\n\r\n\tgetCenter(): Coord {\r\n\t\treturn this.firstCoord();\r\n\t}\r\n\r\n\tisValidShape(): boolean {\r\n\t\treturn super.isValidShape() && this.radius > 0;\r\n\t}\r\n\r\n\tisDrawable(): boolean {\r\n\t\treturn this.coords.length == 1;\r\n\t}\r\n\r\n\tisOver(coord: Coord): boolean {\r\n\t\tlet center = this.getCenter();\r\n\t\treturn Coord.dist(coord, center) < this.radius;\r\n\t}\r\n\r\n\tupdateLastCoord(coord: Coord): this {\r\n\t\tlet center = this.getCenter();\r\n\t\tthis.radius = Coord.dist(center, coord);\r\n\t\treturn this\r\n\t}\r\n\r\n\t/**\r\n\t * draw the area to the given p5 instance\r\n\t * @param {P5} p5 \r\n\t */\r\n\tdisplay(p5: P5): void {\r\n\t\tp5.ellipse(this.getCenter().x, this.getCenter().y, this.radius * 2);\r\n\t}\r\n\r\n\thtmlCoords(dec: number, scale: number): string {\r\n\t\treturn this.getCenter().toHtml(dec, scale) + \",\" + round(this.radius, dec);\r\n\t}\r\n\r\n\tsvgArea(scale: number): string {\r\n\t\tlet x = this.coords[0].toStr(0, 'x', scale);\r\n\t\tlet y = this.coords[0].toStr(0, 'y', scale);\r\n\t\tlet r = round(this.radius, 0);\r\n\t\treturn `<circle cx=\"${x}\" cy=\"${y}\" r=\"${r}\" />`;\r\n\t}\r\n}\r\nexport class AreaPoly extends Area {\r\n\t/**\r\n\t * @param {Coord[]} coords the list of coordinates\r\n\t * @param {string} href the link this area is going to point to\r\n\t * @param {int} id the unique id\r\n\t */\r\n\tconstructor(\r\n\t\tcoords: Coord[] = [],\r\n\t\thref: string = \"\",\r\n\t\ttitle: string = \"\",\r\n\t\tid: number = 0,\r\n\t\tpublic closed = false\r\n\t) {\r\n\t\tsuper(\"poly\", coords, href, title, id);\r\n\t}\r\n\r\n\tisDrawable(): boolean {\r\n\t\treturn this.coords.length >= 2;\r\n\t}\r\n\r\n\tisValidShape(): boolean {\r\n\t\treturn super.isValidShape() && this.closed;\r\n\t}\r\n\r\n\tisOver(coord: Coord): boolean {\r\n\t\tlet x = coord.x;\r\n\t\tlet y = coord.y;\r\n\t\tlet cornersX = this.coords.map(c => { return c.x });\r\n\t\tlet cornersY = this.coords.map(c => { return c.y });\r\n\r\n\t\tlet i, j = cornersX.length - 1;\r\n\t\tlet oddNodes = 0;\r\n\r\n\t\tlet polyX = cornersX;\r\n\t\tlet polyY = cornersY;\r\n\r\n\t\tfor (i = 0; i < cornersX.length; i++) {\r\n\t\t\tif ((polyY[i] < y && polyY[j] >= y || polyY[j] < y && polyY[i] >= y) && (polyX[i] <= x || polyX[j] <= x)) {\r\n\t\t\t\toddNodes ^= (polyX[i] + (y - polyY[i]) / (polyY[j] - polyY[i]) * (polyX[j] - polyX[i]) < x) ? 1 : 0;\r\n\t\t\t}\r\n\t\t\tj = i;\r\n\t\t}\r\n\r\n\t\treturn Boolean(oddNodes);\r\n\t}\r\n\r\n\tisClosable(coord: Coord, tolerance: number): boolean {\r\n\t\tlet dist = Coord.dist(coord, this.firstCoord());\r\n\t\treturn this.coords.length >= 4 && dist < tolerance;\r\n\t}\r\n\r\n\tdrawingCoords(): Coord[] {\r\n\t\tlet coords = super.drawingCoords();\r\n\t\tif (this.closed) {\r\n\t\t\tcoords.push(this.firstCoord());\r\n\t\t}\r\n\t\treturn coords;\r\n\t}\r\n\r\n\tclose(): this {\r\n\t\tthis.closed = true;\r\n\t\tthis.coords.pop();\r\n\t\treturn this;\r\n\t}\r\n\r\n\tmove(coord: Coord): void {\r\n\t\tthis.coords.map(c => c.add(coord));\r\n\t}\r\n\r\n\t/**\r\n\t * draw the area to the given p5 instance\r\n\t * @param {P5} p5 \r\n\t */\r\n\tdisplay(p5: P5): void {\r\n\t\tp5.beginShape();\r\n\t\tthis.drawingCoords().forEach(c => p5.vertex(c.x, c.y));\r\n\t\tp5.endShape();\r\n\t}\r\n\r\n\tsvgArea(scale: number): string {\r\n\t\tlet points = this.drawingCoords().map(c => {\r\n\t\t\treturn c.toStr(0, 'x', scale) + ',' + c.toStr(0, 'y', scale);\r\n\t\t}).join(' ');\r\n\t\treturn `<polygon points=\"${points}\" />`;\r\n\t}\r\n}\r\n\r\nexport class AreaRect extends AreaPoly {\r\n\t/**\r\n\t * @param {Coord[]} coords the list of coordinates\r\n\t * @param {string} href the link this area is going to point to\r\n\t * @param {number} id the unique id\r\n\t */\r\n\tconstructor(\r\n\t\tcoords: Coord[] = [],\r\n\t\thref: string = \"\",\r\n\t\ttitle: string = \"\",\r\n\t\tid: number = 0\r\n\t) {\r\n\t\tsuper(coords, href, title, id, true);\r\n\t\tif (this.coords.length > 0 && this.coords.length < 4) {\r\n\t\t\tlet coord = this.firstCoord();\r\n\t\t\tthis.coords = [\r\n\t\t\t\tcoord,\r\n\t\t\t\tcoord.clone(),\r\n\t\t\t\tcoord.clone(),\r\n\t\t\t\tcoord.clone(),\r\n\t\t\t];\r\n\t\t}\r\n\t}\r\n\r\n\tisValidShape(): boolean {\r\n\t\treturn super.isValidShape() && !this.isNullArea();\r\n\t}\r\n\r\n\tprivate isNullArea(): boolean {\r\n\t\treturn this.coords[0].x == this.coords[1].x || this.coords[0].y == this.coords[3].y;\r\n\t}\r\n\r\n\tupdateLastCoord(coord: Coord): this {\r\n\t\tthis.coords[1].x = coord.x\r\n\t\tthis.coords[2] = coord;\r\n\t\tthis.coords[3].y = coord.y;\r\n\t\treturn this;\r\n\t}\r\n\r\n}\r\n\r\nexport class AreaDefault extends Area {\r\n\tprotected isDefault = true;\r\n\t/**\r\n\t * Constructor\r\n\t * @param {string} href the link this area is going to point to\r\n\t * @param {string} title the title on hover\r\n\t */\r\n\tconstructor(\r\n\t\tpublic iMap: ImageMap,\r\n\t\thref: string = \"\",\r\n\t\ttitle: string = \"\"\r\n\t) {\r\n\t\tsuper(\"default\", [], href, title);\r\n\t}\r\n\r\n\tisDrawable(): boolean {\r\n\t\treturn true;\r\n\t}\r\n\r\n\tisOver(): boolean {\r\n\t\treturn true;\r\n\t}\r\n\r\n\t/**\r\n\t * draw the area to the given p5 instance\r\n\t * @param {P5} p5 \r\n\t */\r\n\tdisplay(p5: P5): void {\r\n\t\tp5.rect(0, 0, this.iMap.width - 1, this.iMap.height - 1);\r\n\t}\r\n\r\n\tsvgArea(scale: number): string {\r\n\t\treturn '<rect x=\"0\" y=\"0\" width=\"100%\" height=\"100%\" />';\r\n\t}\r\n}\r\n", "import { Area, AreaDefault } from \"./class.area\";\r\n\r\nexport class ImageMap {\r\n\r\n\tprotected dArea: AreaDefault = new AreaDefault(this);\r\n\tprotected lastId: number = 0;\r\n\r\n\t/**\r\n\t * Contructor\r\n\t * @param {Area[]} areas \r\n\t * @param {string} name \r\n\t * @param {boolean} hasDefaultArea\r\n\t */\r\n\tconstructor(\r\n\t\tpublic width: number,\r\n\t\tpublic height: number,\r\n\t\tprotected areas: Area[] = [],\r\n\t\tprotected name: string = \"\",\r\n\t\tpublic hasDefaultArea: boolean = false\r\n\t) {}\r\n\r\n\tsetFromObject(obj: Object): this {\r\n\t\tconst iMap = obj as ImageMap;\r\n\t\tiMap.dArea.iMap = this;\r\n\t\tthis.width = iMap.width;\r\n\t\tthis.height = iMap.height;\r\n\t\tthis.areas = iMap.areas.map(Area.fromObject);\r\n\t\tthis.name = iMap.name;\r\n\t\tthis.hasDefaultArea = iMap.hasDefaultArea;\r\n\t\tthis.dArea = Area.fromObject(iMap.dArea) as AreaDefault;\r\n\t\treturn this;\r\n\t}\r\n\r\n\tsetName(name: string): this {\r\n\t\tif (name) {\r\n\t\t\tthis.name = name.replace(/\\s+/g, \"\");\r\n\t\t}\r\n\t\treturn this;\r\n\t}\r\n\r\n\tgetName(): string {\r\n\t\treturn this.name;\r\n\t}\r\n\r\n\tsetSize(width: number, height: number): this {\r\n\t\tthis.width = width;\r\n\t\tthis.height = height;\r\n\t\treturn this;\r\n\t}\r\n\r\n\tsetDefaultArea(bool: boolean): this {\r\n\t\tthis.hasDefaultArea = bool;\r\n\t\treturn this;\r\n\t}\r\n\r\n\t/**\r\n\t * Returns a copy of the area of the imageMap\r\n\t * @param {boolean} all with the default area (if exist) or not (default: true)\r\n\t * @returns {Area[]} a copy of the areas\r\n\t */\r\n\tgetAreas(all: boolean = true): Area[] {\r\n\t\tlet areas = this.areas.slice();\r\n\t\tif (all && this.hasDefaultArea) areas.push(this.dArea);\r\n\t\treturn areas;\r\n\t}\r\n\r\n\tisEmpty(): boolean {\r\n\t\treturn this.getAreas().length == 0;\r\n\t}\r\n\r\n\t/**\r\n\t * Adds an Area at the end of the areas array, and returns the last inserted Area's id\r\n\t * @param {Area} area an area\r\n\t */\r\n\taddArea(area: Area, setId = true): number {\r\n\t\tif (setId)\r\n\t\t\tarea.setId(this.getNewId());\r\n\t\tthis.areas.unshift(area);\r\n\t\treturn area.id;\r\n\t}\r\n\r\n\trmvArea(id: number): number {\r\n\t\tlet index = this.areaIndex(id);\r\n\t\tthis.areas.splice(index, 1);\r\n\t\treturn index;\r\n\t}\r\n\r\n\t/**\r\n\t * Move an area up or down in the areas array\r\n\t * @param {number} id \r\n\t * @param {number} direction \r\n\t */\r\n\tmoveArea(id: number, direction: number): number|false {\r\n\t\tlet index = this.areaIndex(id);\r\n\t\tlet area = this.areas[index];\r\n\t\tlet nextIndex = index + direction;\r\n\t\tif (nextIndex < 0 || nextIndex >= this.areas.length)\r\n\t\t\treturn false;\r\n\t\tthis.rmvArea(id);\r\n\t\tthis.insertArea(area, nextIndex);\r\n\t\treturn nextIndex;\r\n\t}\r\n\r\n\tshiftArea(): Area|undefined {\r\n\t\treturn this.areas.shift();\r\n\t}\r\n\r\n\tpopArea(): Area|undefined {\r\n\t\treturn this.areas.pop();\r\n\t}\r\n\r\n\tinsertArea(area: Area, index: number): number {\r\n\t\tthis.areas.splice(index, 0, area);\r\n\t\treturn this.areas.length;\r\n\t}\r\n\r\n\tareaIndex(id: number): number {\r\n\t\treturn this.areas.findIndex(a => {\r\n\t\t\treturn a.id == id;\r\n\t\t});\r\n\t}\r\n\r\n\tisFirstArea(id: number): boolean {\r\n\t\treturn this.areaIndex(id) == 0;\r\n\t}\r\n\r\n\tisLastArea(id: number): boolean {\r\n\t\treturn this.areaIndex(id) == this.areas.length - 1;\r\n\t}\r\n\r\n\tgetNewId(): number {\r\n\t\tthis.lastId++;\r\n\t\treturn this.lastId;\r\n\t}\r\n\r\n\ttoHtml(scale = 1): string {\r\n\t\tlet areas: string[] = [];\r\n\t\tthis.getAreas().forEach(a => {\r\n\t\t\tif (a.isValidShape()) {\r\n\t\t\t\tareas.push('\\t' + a.toHtml(scale));\r\n\t\t\t}\r\n\t\t});\r\n\t\treturn '<map name=\"' + this.name + '\" id=\"' + this.name + '\">\\n' + areas.join('\\n') + '\\n</map>';\r\n\t}\r\n  \r\n\ttoImf(scale = 1): string {\r\n\t\tlet areas: string[] = [];\r\n\t\tthis.getAreas().forEach((a,k) => {\r\n\t\t\tif (a.isValidShape()) {\r\n\t\t\t\tareas.push('\\t' + a.toImf(scale,k+1));\r\n\t\t\t}\r\n\t\t});\r\n\t\treturn '<icnObjectGroup>\\n' + areas.join('\\n')+'\\n</icnObjectGroup>';\r\n\t}\r\n\r\n\ttoSvg(scale = 1): string {\r\n\t\tlet areas: string[] = [];\r\n\t\tthis.getAreas(false).forEach(a => {\r\n\t\t\tif (a.isValidShape()) {\r\n\t\t\t\tareas.push('\\t' + a.toSvg(scale));\r\n\t\t\t}\r\n\t\t});\r\n\t\tlet str = '<svg version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" width=\"' + this.width + '\" height=\"' + this.height + '\">\\n';\r\n\t\tstr += areas.join('\\n');\r\n\t\tstr += '\\n</svg>';\r\n\t\treturn str;\r\n\t}\r\n\r\n\t/** Removes every areas from the areas array */\r\n\tclearAreas(): this {\r\n\t\tthis.areas = [];\r\n\t\treturn this;\r\n\t}\r\n\r\n\tsetAreas(areas: Area[]): this {\r\n\t\tthis.areas = areas;\r\n\t\treturn this;\r\n\t}\r\n\r\n  makeid(length: number) {\r\n    let result: string = \"\";\r\n    const characters: string = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\";\r\n    const charactersLength = characters.length;\r\n    let counter: number = 0;\r\n    while (counter < length) {\r\n      result += characters.charAt(Math.floor(Math.random() * charactersLength));\r\n      counter += 1;\r\n    }\r\n    return result;\r\n}\r\n\r\n\r\n}", "//@ts-check\r\n\r\nimport { imageMapCreator } from \"./p5.image-map-creator\";\r\n\r\n/**\r\n * Class representing the semi transparent layer which can appear on top of the background\r\n * @param {number} speed the speed of the opacity animation (1-255, default 15)\r\n */\r\nexport class BgLayer {\r\n\r\n\tconstructor(\r\n\t\tprotected iMap: imageMapCreator,\r\n\t\tprotected speed = 15,\r\n\t\tprotected alpha = 0,\r\n\t\tprotected over = false\r\n\t) {}\r\n\r\n\tappear() {\r\n\t\tthis.over = true;\r\n\t}\r\n\r\n\tdisappear() {\r\n\t\tthis.over = false;\r\n\t}\r\n\r\n\tdisplay() {\r\n\t\tif (this.over) {\r\n\t\t\tif (this.alpha < 100)\r\n\t\t\t\tthis.alpha += this.speed;\r\n\t\t}\r\n\t\telse {\r\n\t\t\tif (this.alpha > 0)\r\n\t\t\t\tthis.alpha -= this.speed;\r\n\t\t}\r\n\t\tthis.iMap.p5.noStroke();\r\n\t\tthis.iMap.p5.fill(255, 255, 255, this.alpha);\r\n\t\tthis.iMap.p5.rect(\r\n\t\t\tthis.iMap.trueX(0),\r\n\t\t\tthis.iMap.trueY(0),\r\n\t\t\tthis.iMap.p5.width / this.iMap.view.scale,\r\n\t\t\tthis.iMap.p5.height / this.iMap.view.scale\r\n\t\t);\r\n\t}\r\n}", "//@ts-check\r\n\r\nimport { Area } from \"./class.area\";\r\nimport { Coord } from \"./class.coord\";\r\n\r\nexport class Selection {\r\n\tprotected origin: Coord = new Coord();\r\n\tprotected position: Coord = this.origin.clone();\r\n\tprotected areas: Map<number, Area> = new Map;\r\n\tprotected points: Map<Coord, number> = new Map;\r\n\r\n\tconstructor() {}\r\n\r\n\tresetOrigin(coord: Coord = new Coord()): void {\r\n\t\tthis.origin = coord.clone();\r\n\t\tthis.position = coord;\r\n\t\tthis.addPoint(coord);\r\n\t}\r\n\r\n\t/**\r\n\t * Register an Area as a part of the selection\r\n\t */\r\n\tregisterArea(area: Area): void {\r\n\t\tthis.areas.set(area.getId(), area);\r\n\t}\r\n\r\n\t/**\r\n\t * Add Area and its points to the selection\r\n\t */\r\n\taddArea(area: Area): void {\r\n\t\tthis.registerArea(area);\r\n\t\tarea.getCoords().forEach((p: Coord) => this.addPoint(p));\r\n\t}\r\n\r\n\taddPoint(point: Coord): void {\r\n\t\tconst prev = this.points.get(point) || 0;\r\n\t\tthis.points.set(point, prev + 1);\r\n\t}\r\n\r\n\tcontainsArea(area: Area): boolean {\r\n\t\treturn this.areas.has(area.getId());\r\n\t}\r\n\r\n\tcontainsPoint(point: Coord): boolean {\r\n\t\treturn this.points.has(point);\r\n\t}\r\n\r\n\tdistToOrigin(): Coord {\r\n\t\treturn this.getPosition().diff(this.origin);\r\n\t}\r\n\r\n\tclear(): void {\r\n\t\tthis.areas.clear();\r\n\t\tthis.points.clear();\r\n\t\tthis.origin = new Coord();\r\n\t}\r\n\r\n\tisEmpty(): boolean {\r\n\t\treturn this.points.size == 0;\r\n\t}\r\n\r\n\t//------------------------ Start Interface Movable -------------------------------\r\n\tmove(coord: Coord): void {\r\n\t\tthis.points.forEach((nb: number, c: Coord): void => {\r\n\t\t\tc.move(coord);\r\n\t\t});\r\n\t}\r\n\r\n\tgetPosition(): Coord {\r\n\t\treturn this.position;\r\n\t}\r\n\r\n\tsetPosition(coord: Coord): void {\r\n\t\tconst move = coord.diff(this.position);\r\n\t\tthis.move(move);\r\n\t}\r\n\t//------------------------- End Interface Movable --------------------------------\r\n}", "import { version } from '../package.json';\r\nimport { ImageMap } from \"./class.image-map\";\r\nimport { BgLayer } from \"./p5.bg-layer\";\r\nimport { Area, AreaCircle, AreaRect, AreaPoly, AreaEmpty } from \"./class.area\";\r\nimport { Coord } from \"./class.coord\";\r\nimport { Selection } from \"./class.selection\";\r\nimport { openWindow } from \"./utils\";\r\nimport download from \"downloadjs\";\r\n//@ts-ignore no types for this lib\r\nimport UndoManager from \"undo-manager\";\r\n//@ts-ignore no types for this lib\r\nimport QuickSettings from \"quicksettings\";\r\n//@ts-ignore no types for this lib\r\nimport * as ContextMenu from \"../lib/contextmenu/contextmenu\";\r\nimport \"../lib/contextmenu/contextmenu.css\";\r\nimport type P5 from \"p5\";\r\nimport indexUrl from '../demos/index.html';\r\n\r\nexport type Tool = \"circle\" | \"polygon\" | \"rectangle\" | \"select\" | \"delete\" | \"test\";\r\nexport type Image = {\r\n\tdata: P5.Image|null,\r\n\tfile: P5.File|null,\r\n};\r\nexport type ToolLabel = {\r\n\tkey: string,\r\n\tvalue: Tool,\r\n};\r\nexport type View = { scale: number, transX: number, transY: number, };\r\nexport type Zoom = { min: number, max: number, sensativity: number, };\r\n\r\nexport class Save {\r\n\tconstructor (public version: string, public map: ImageMap) {}\r\n}\r\n\r\n/**\r\n */\r\nexport class imageMapCreator {\r\n\tprotected width: number;\r\n\tprotected height: number;\r\n\tprotected tool: Tool;\r\n\tprotected drawingTools: Tool[];\r\n\tprotected settings: any;\r\n\tprotected menu = {\r\n\t\tSetUrl: {\r\n\t\t\tonSelect: (target: Element, key: any, item: HTMLElement, area: Area) => { this.setAreaUrl(area); },\r\n\t\t\tlabel: \"Set url\",\r\n\t\t},\r\n\t\tSetTitle: {\r\n\t\t\tonSelect: (target: Element, key: any, item: HTMLElement, area: Area) => { this.setAreaTitle(area); },\r\n\t\t\tlabel: \"Set title\",\r\n\t\t},\r\n\t\tDelete: (target: Element, key: any, item: HTMLElement, area: Area) => { this.deleteArea(area); },\r\n\t\tMoveFront: {\r\n\t\t\tonSelect: (target: Element, key: any, item: HTMLElement, area: Area) => { this.moveArea(area, -1); },\r\n\t\t\tenabled: true,\r\n\t\t\tlabel: \"Move Forward\",\r\n\t\t},\r\n\t\tMoveBack: {\r\n\t\t\tonSelect: (target: Element, key: any, item: HTMLElement, area: Area) => { this.moveArea(area, 1); },\r\n\t\t\tenabled: true,\r\n\t\t\tlabel: \"Move Backward\",\r\n\t\t}\r\n\t};\r\n\tprotected tempArea: AreaEmpty;\r\n\tprotected selection: Selection;\r\n\tprotected hoveredArea: Area|null;\r\n\tprotected hoveredPoint: Coord|null;\r\n\tpublic map: ImageMap;\r\n\tprotected undoManager: any;\r\n\tprotected img: Image;\r\n\tpublic view: View;\r\n\tprotected zoomParams: Zoom;\r\n\tprotected magnetism: boolean;\r\n\tprotected fusion: boolean;\r\n\tprotected tolerance: number;\r\n\tprotected bgLayer: BgLayer;\r\n\tpublic p5: P5;\r\n\r\n\t/**\r\n\t * Constructor\r\n\t * @param {string} elementId id of the html container\r\n\t * @param {number} width\r\n\t * @param {number} height\r\n\t */\r\n\tconstructor(elementId: string, width: number = 600, height: number = 600) {\r\n\t\tconst element = document.getElementById(elementId);\r\n\t\tif (!element) throw new Error('HTMLElement not found');\r\n\t\tthis.width = width;\r\n\t\tthis.height = height;\r\n\t\tthis.tool = \"circle\";\r\n\t\tthis.drawingTools = [\"rectangle\", \"circle\", \"polygon\"];\r\n\t\tthis.settings;\r\n\t\tthis.tempArea = new AreaEmpty();\r\n\t\tthis.selection = new Selection();\r\n\t\tthis.hoveredArea = null;\r\n\t\tthis.hoveredPoint = null;\r\n\t\tthis.map = new ImageMap(width, height);\r\n\t\tthis.undoManager = new UndoManager();\r\n\t\tthis.img = {data: null, file: null};\r\n\t\tthis.view = {\r\n\t\t\tscale: 1,\r\n\t\t\ttransX: 0,\r\n\t\t\ttransY: 0\r\n\t\t}\r\n\t\tthis.zoomParams = {\r\n\t\t\tmin: 0.03,\r\n\t\t\tmax: 3,\r\n\t\t\tsensativity: 0.001\r\n\t\t}\r\n\t\tthis.magnetism = true;\r\n\t\tthis.fusion = false;\r\n\t\tthis.tolerance = 6;\r\n\t\tthis.bgLayer = new BgLayer(this);\r\n\t\t// Must be the last instruction of the constructor.\r\n\t\t// @ts-ignore p5 is supposed to be in the global scope\r\n\t\tthis.p5 = new p5(this.sketch.bind(this), element);\r\n\t}\r\n\r\n\t//---------------------------- p5 Sketch ----------------------------------\r\n\r\n\t/**\r\n\t * Override p5 methods\r\n\t * @param {P5} p5\r\n\t */\r\n\tprivate sketch(p5: P5): void {\r\n\t\t// Set this.p5 also in sketch() (fix for #30).\r\n\t\tthis.p5 = p5;\r\n\r\n\t\tp5.setup = this.setup.bind(this);\r\n\t\tp5.draw = this.draw.bind(this);\r\n\r\n\t\tp5.mousePressed = this.mousePressed.bind(this);\r\n\t\tp5.mouseDragged = this.mouseDragged.bind(this);\r\n\t\tp5.mouseReleased = this.mouseReleased.bind(this);\r\n\t\tp5.mouseWheel = this.mouseWheel.bind(this);\r\n\t\t//@ts-ignore p5 types didn't specify the KeyBoardEvent nor the boolean return type\r\n\t\tp5.keyPressed = this.keyPressed.bind(this);\r\n\t}\r\n\r\n\t//---------------------------- p5 Functions ----------------------------------\r\n\r\n\tprivate setup(): void {\r\n\t\tlet canvas = this.p5.createCanvas(this.width, this.height);\r\n\t\tcanvas.drop(this.handeFile.bind(this)).dragLeave(this.onLeave.bind(this)).dragOver(this.onOver.bind(this));\r\n\t\t//@ts-ignore p5 types does not specify the canvas attribute\r\n\t\tthis.settings = QuickSettings.create(this.p5.width + 5, 0, \"Image-map Creator\", this.p5.canvas.parentElement)\r\n\t\t\t.setDraggable(false)\r\n\t\t\t.addText(\"Map Name\", \"\", (v: string) => { this.map.setName(v) })\r\n\t\t\t.addDropDown(\"Tool\", [\"circle\", \"rectangle\", \"polygon\", \"select\", \"delete\", \"test\"], (v: ToolLabel) => { this.setTool(v.value) })\r\n\t\t\t.addBoolean(\"Default Area\", this.map.hasDefaultArea, (v: boolean) => { this.setDefaultArea(v) })\r\n\t\t\t.addButton(\"Undo\", this.undoManager.undo)\r\n\t\t\t.addButton(\"Redo\", this.undoManager.redo)\r\n\t\t\t.addButton(\"Clear\", this.clearAreas.bind(this))\r\n\t\t\t.addButton(\"Generate Html\", () => { this.settings.setValue(\"Output\", this.map.toHtml()) })\r\n\t\t\t.addButton(\"Generate Svg\", () => { this.settings.setValue(\"Output\", this.map.toSvg()) })\r\n\t\t\t.addButton(\"Generate Imf\", () => { this.settings.setValue(\"Output\", this.map.toImf()) })\r\n\t\t\t.addTextArea(\"Output\")\r\n\t\t\t.addButton(\"Save\", this.save.bind(this));\r\n\t\t//@ts-ignore Fix for oncontextmenu\r\n\t\tthis.p5.canvas.addEventListener(\"contextmenu\", (e) => { e.preventDefault(); });\r\n\t\t//@ts-ignore Fix for middle click mouse down triggers scroll on windows\r\n\t\tthis.p5.canvas.addEventListener(\"mousedown\", (e) => { e.preventDefault(); });\r\n\t\t//@ts-ignore Select all onclick on the Output field\r\n\t\tdocument.getElementById(\"Output\").setAttribute(\"onFocus\", \"this.select();\");\r\n\t}\r\n\r\n\tprivate draw(): void {\r\n\t\tthis.updateTempArea();\r\n\t\tthis.updateHovered();\r\n\t\tthis.setCursor();\r\n\t\tthis.setOutput();\r\n\t\tthis.setBackground();\r\n\t\tthis.setTitle(this.hoveredArea);\r\n\t\tthis.p5.translate(this.view.transX, this.view.transY);\r\n\t\tthis.p5.scale(this.view.scale);\r\n\t\tthis.drawImage();\r\n\t\tthis.bgLayer.display();\r\n\t\tthis.drawAreas();\r\n\t}\r\n\r\n\t//------------------------------ p5 Events -----------------------------------\r\n\r\n\tprivate mousePressed(): void {\r\n\t\tif (this.mouseIsHoverSketch()) {\r\n\t\t\tlet coord = this.drawingCoord();\r\n\t\t\tif (this.p5.mouseButton == this.p5.LEFT && !ContextMenu.isOpen()) {\r\n\t\t\t\tswitch (this.tool) {\r\n\t\t\t\t\tcase \"circle\":\r\n\t\t\t\t\tcase \"rectangle\":\r\n\t\t\t\t\t\tthis.setTempArea(coord);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"polygon\":\r\n\t\t\t\t\t\tlet areaPoly = this.tempArea as AreaPoly;\r\n\t\t\t\t\t\tif (areaPoly.isEmpty()) {\r\n\t\t\t\t\t\t\tthis.setTempArea(coord);\r\n\t\t\t\t\t\t} else if (areaPoly.isClosable(this.mCoord(), this.tolerance / this.view.scale)) {\r\n\t\t\t\t\t\t\tareaPoly.close();\r\n\t\t\t\t\t\t\tif (areaPoly.isValidShape())\r\n\t\t\t\t\t\t\t\tthis.createArea(areaPoly);\r\n\t\t\t\t\t\t\tthis.tempArea = new AreaEmpty();\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tthis.tempArea.addCoord(this.mCoord());\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"select\":\r\n\t\t\t\t\t\tif (this.hoveredPoint !== null) {\r\n\t\t\t\t\t\t\tthis.selection.addPoint(this.hoveredPoint);\r\n\t\t\t\t\t\t\tthis.selection.registerArea(this.hoveredArea!);\r\n\t\t\t\t\t\t\tthis.selection.resetOrigin(this.hoveredPoint);\r\n\t\t\t\t\t\t} else if (this.hoveredArea !== null) {\r\n\t\t\t\t\t\t\tthis.selection.addArea(this.hoveredArea);\r\n\t\t\t\t\t\t\tthis.selection.resetOrigin(this.mCoord());\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tprivate mouseDragged(): void {\r\n\t\tif (this.mouseIsHoverSketch() && !ContextMenu.isOpen()) {\r\n\t\t\tif (this.p5.mouseButton == this.p5.LEFT) {\r\n\t\t\t\tswitch (this.tool) {\r\n\t\t\t\t\tcase \"select\":\r\n\t\t\t\t\t\tthis.selection.setPosition(this.drawingCoord());\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t} else if (this.p5.mouseButton == this.p5.CENTER) {\r\n\t\t\t\tthis.view.transX += this.p5.mouseX - this.p5.pmouseX;\r\n\t\t\t\tthis.view.transY += this.p5.mouseY - this.p5.pmouseY;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tprivate mouseReleased(e: MouseEvent): void {\r\n\t\tswitch (this.tool) {\r\n\t\t\tcase \"rectangle\":\r\n\t\t\tcase \"circle\":\r\n\t\t\t\tif (this.tempArea.isValidShape())\r\n\t\t\t\t\tthis.createArea(this.tempArea);\r\n\t\t\t\tthis.tempArea = new AreaEmpty();\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"select\":\r\n\t\t\t\tlet selection = this.selection;\r\n\t\t\t\tif (!selection.isEmpty()) {\r\n\t\t\t\t\tlet move = this.selection.distToOrigin();\r\n\t\t\t\t\tthis.undoManager.add({\r\n\t\t\t\t\t\tundo: () => selection.move(move.invert()),\r\n\t\t\t\t\t\tredo: () => selection.move(move),\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\tthis.selection = new Selection();\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t\tthis.onClick(e);\r\n\t\tthis.bgLayer.disappear();\r\n\t}\r\n\r\n\tprivate mouseWheel(e: WheelEvent): boolean {\r\n\t\tif (this.mouseIsHoverSketch()) {\r\n\t\t\tlet coefZoom = this.view.scale * this.zoomParams.sensativity * - e.deltaY;\r\n\t\t\tthis.zoom(coefZoom);\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\treturn true;\r\n\t}\r\n\r\n\tprivate keyPressed(e: KeyboardEvent): boolean {\r\n\t\tif (e.composed && e.ctrlKey) {\r\n\t\t\tswitch (e.key) {\r\n\t\t\t\tcase 's':\r\n\t\t\t\t\tthis.save();\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'z':\r\n\t\t\t\t\tthis.undoManager.undo();\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'y':\r\n\t\t\t\t\tthis.undoManager.redo();\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t} else if (\r\n\t\t\tthis.tool == \"polygon\" &&\r\n\t\t\t//@ts-ignore p5 types didn't specify the ESCAPE keycode\r\n\t\t\te.keyCode == this.p5.ESCAPE\r\n\t\t) {\r\n\t\t\tthis.tempArea = new AreaEmpty();\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\treturn true;\r\n\t}\r\n\r\n\t//---------------------------- Functions ----------------------------------\r\n\r\n\ttrueX(coord: number): number {\r\n\t\treturn (coord - this.view.transX) / this.view.scale;\r\n\t}\r\n\r\n\ttrueY(coord: number): number {\r\n\t\treturn (coord - this.view.transY) / this.view.scale;\r\n\t}\r\n\r\n\tmX(): number {\r\n\t\treturn this.trueX(this.p5.mouseX);\r\n\t}\r\n\r\n\tmY(): number {\r\n\t\treturn this.trueY(this.p5.mouseY);\r\n\t}\r\n\r\n\t/**\r\n\t * Get the true coordinate of the mouse relative to the imageMap\r\n\t */\r\n\tmCoord(): Coord {\r\n\t\treturn new Coord(this.mX(), this.mY());\r\n\t}\r\n\r\n\t/**\r\n\t * Get the coordinate of the mouse for drawing\r\n\t */\r\n\tdrawingCoord(): Coord {\r\n\t\tlet coord = this.mCoord();\r\n\t\tcoord = this.magnetism ? this.hoveredPoint ? this.hoveredPoint : coord : coord;\r\n\t\tif (!this.fusion) {\r\n\t\t\tcoord = coord.clone();\r\n\t\t}\r\n\t\treturn coord;\r\n\t}\r\n\r\n\tmouseIsHoverSketch(): boolean {\r\n\t\treturn this.p5.mouseX <= this.p5.width && this.p5.mouseX >= 0 && this.p5.mouseY <= this.p5.height && this.p5.mouseY >= 0;\r\n\t}\r\n\r\n\t/**\r\n\t * Sets hoveredPoint and hoveredArea excluding currently selected Areas\r\n\t */\r\n\tupdateHovered(): void {\r\n\t\tthis.hoveredPoint = null;\r\n\t\tlet allAreas = this.map.getAreas();\r\n\t\tlet area = allAreas.find((a: Area): boolean => {\r\n\t\t\tif (this.selection.containsArea(a)) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\tif (this.tool != \"test\") {\r\n\t\t\t\tlet point = a.isOverPoint(this.mCoord(), this.tolerance / this.view.scale)\r\n\t\t\t\tif (point && !this.selection.containsPoint(point)) {\r\n\t\t\t\t\tthis.hoveredPoint = point;\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (a.isOver(this.mCoord())) {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t});\r\n\t\tif (this.p5.mouseIsPressed) return;\r\n\t\tthis.hoveredArea = area ? area : null;\r\n\t}\r\n\r\n\tonClick(event: MouseEvent): void {\r\n\t\tif (this.mouseIsHoverSketch()) {\r\n\t\t\tif (this.hoveredArea) {\r\n\t\t\t\tif (this.p5.mouseButton == this.p5.RIGHT) {\r\n\t\t\t\t\tthis.selection.addArea(this.hoveredArea);\r\n\t\t\t\t\tthis.menu.MoveFront.enabled = !(this.map.isFirstArea(this.hoveredArea.id) || this.hoveredArea.getShape() == 'default');\r\n\t\t\t\t\tthis.menu.MoveBack.enabled = !(this.map.isLastArea(this.hoveredArea.id) || this.hoveredArea.getShape() == 'default');\r\n\t\t\t\t\tContextMenu.display(event, this.menu, {\r\n\t\t\t\t\t\tposition: \"click\",\r\n\t\t\t\t\t\tdata: this.hoveredArea\r\n\t\t\t\t\t});\r\n\t\t\t\t\t// return false; // doesn't work as expected\r\n\t\t\t\t} else if (this.p5.mouseButton == this.p5.LEFT && !ContextMenu.isOpen()) {\r\n\t\t\t\t\tswitch (this.tool) {\r\n\t\t\t\t\t\tcase \"test\":\r\n\t\t\t\t\t\t\topenWindow(this.hoveredArea.getHref());\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase \"delete\":\r\n\t\t\t\t\t\t\tthis.deleteArea(this.hoveredArea);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis.selection.clear();\r\n\t}\r\n\r\n\tonOver(evt: MouseEvent): void {\r\n\t\tthis.bgLayer.appear();\r\n\t\tevt.preventDefault();\r\n\t}\r\n\r\n\tonLeave(): void {\r\n\t\tthis.bgLayer.disappear();\r\n\t}\r\n\r\n\thandeFile(file: P5.File): void {\r\n\t\tif (file.type == \"image\") {\r\n\t\t\tthis.img.data = this.p5.loadImage(file.data, img => this.resetView(img));\r\n\t\t\tthis.img.file = file.file;\r\n\t\t\tif (!this.map.getName()) {\r\n\t\t\t\tthis.map.setName(file.name);\r\n\t\t\t\tthis.settings.setValue(\"Map Name\", this.map.getName());\r\n\t\t\t}\r\n\t\t} else if (file.subtype == 'json') {\r\n\t\t\tfetch(file.data)\r\n\t\t\t\t.then(res => res.blob())\r\n\t\t\t\t.then(blob => {\r\n\t\t\t\t\tlet reader = new FileReader();\r\n\t\t\t\t\treader.onload = () => {\r\n\t\t\t\t\t\tlet json = reader.result;\r\n\t\t\t\t\t\tif (typeof(json) == \"string\") {\r\n\t\t\t\t\t\t\tthis.importMap(json);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t};\r\n\t\t\t\t\treader.readAsText(blob);\r\n\t\t\t\t});\r\n\t\t}\r\n\t\tthis.bgLayer.disappear();\r\n\t}\r\n\r\n\tresetView(img: P5.Image): void {\r\n\t\tthis.view.scale = 1;\r\n\t\tthis.view.transX = 0;\r\n\t\tthis.view.transY = 0;\r\n\t\tlet xScale = this.p5.width / img.width;\r\n\t\tlet yScale = this.p5.height / img.height;\r\n\t\tif (xScale < this.view.scale)\r\n\t\t\tthis.view.scale = xScale;\r\n\t\tif (yScale < this.view.scale)\r\n\t\t\tthis.view.scale = yScale;\r\n\t\tthis.map.setSize(img.width, img.height);\r\n\t}\r\n\r\n\tzoom(coef: number): void {\r\n\t\tlet newScale = this.view.scale + coef;\r\n\t\tif (newScale > this.zoomParams.min && newScale < this.zoomParams.max) {\r\n\t\t\tlet mouseXToOrigin = this.mX();\r\n\t\t\tlet mouseYToOrigin = this.mY();\r\n\t\t\tlet transX = mouseXToOrigin * coef;\r\n\t\t\tlet transY = mouseYToOrigin * coef;\r\n\r\n\t\t\tthis.view.scale = newScale;\r\n\t\t\tthis.view.transX -= transX;\r\n\t\t\tthis.view.transY -= transY;\r\n\t\t}\r\n\t}\r\n\r\n\tdrawImage(): void {\r\n\t\tif (this.img.data)\r\n\t\t\tthis.p5.image(this.img.data, 0, 0, this.img.data.width, this.img.data.height);\r\n\t}\r\n\r\n\tdrawAreas(): void {\r\n\t\tlet allAreas = [this.tempArea].concat(this.map.getAreas());\r\n\t\tfor (let i = allAreas.length; i--;) {\r\n\t\t\tlet area = allAreas[i];\r\n\t\t\tthis.setAreaStyle(area);\r\n\t\t\tif (area.isDrawable())\r\n\t\t\t\tarea.display(this.p5);\r\n\t\t}\r\n\t\tif (this.hoveredPoint) {\r\n\t\t\tlet point = this.hoveredPoint;\r\n\t\t\tthis.p5.fill(0);\r\n\t\t\tthis.p5.noStroke();\r\n\t\t\tthis.p5.ellipse(point.x, point.y, 6 / this.view.scale)\r\n\t\t}\r\n\t}\r\n\r\n\tsetTool(value: Tool): void {\r\n\t\tthis.tool = value;\r\n\t\tthis.tempArea = new AreaEmpty();\r\n\t}\r\n\r\n\tsetCursor(): void {\r\n\t\tif (this.drawingTools.includes(this.tool)) {\r\n\t\t\tswitch (this.tool) {\r\n\t\t\t\tcase \"polygon\":\r\n\t\t\t\t\tlet areaPoly = this.tempArea as AreaPoly\r\n\t\t\t\t\tif (!areaPoly.isEmpty() && areaPoly.isClosable(this.mCoord(), 5 / this.view.scale)) {\r\n\t\t\t\t\t\tthis.p5.cursor(this.p5.HAND);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tthis.p5.cursor(this.p5.CROSS);\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tthis.p5.cursor(this.p5.ARROW);\r\n\t\t\tif (this.hoveredArea) {\r\n\t\t\t\tswitch (this.tool) {\r\n\t\t\t\t\tcase \"test\":\r\n\t\t\t\t\tcase \"delete\":\r\n\t\t\t\t\t\tthis.p5.cursor(this.p5.HAND);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"select\":\r\n\t\t\t\t\t\tif (!this.hoveredPoint) {\r\n\t\t\t\t\t\t\tthis.p5.cursor(this.p5.MOVE);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tsetOutput(): void {\r\n\t\tswitch (this.tool) {\r\n\t\t\tcase \"test\":\r\n\t\t\tcase \"select\":\r\n\t\t\t\tif (this.mouseIsHoverSketch()) {\r\n\t\t\t\t\tlet href = this.hoveredArea ? this.hoveredArea.getHrefVerbose() : \"none\";\r\n\t\t\t\t\tthis.settings.setValue(\"Output\", href);\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n\r\n\tsetBackground(): void {\r\n\t\tthis.p5.background(200);\r\n\t\tif (!this.img.data) {\r\n\t\t\tthis.p5.noStroke();\r\n\t\t\tthis.p5.fill(0);\r\n\t\t\tthis.p5.textAlign(this.p5.CENTER, this.p5.CENTER);\r\n\t\t\tthis.p5.textSize(15);\r\n\t\t\tlet text = 'Drag and drop an image and/or a .map.json save file here';\r\n\t\t\tthis.p5.text(text, this.p5.width / 2, this.p5.height / 2);\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Set the title of the canvas from an area\r\n\t */\r\n\tsetTitle(area: Area|null): void {\r\n\t\tif (this.tool == \"test\" && area && area.getTitle()) {\r\n\t\t\t//@ts-ignore p5 types does not specify the canvas attribute\r\n\t\t\tthis.p5.canvas.setAttribute(\"title\", area.getTitle());\r\n\t\t} else {\r\n\t\t\t//@ts-ignore p5 types does not specify the canvas attribute\r\n\t\t\tthis.p5.canvas.removeAttribute(\"title\");\r\n\t\t}\r\n\t}\r\n\r\n\tsetAreaStyle(area: Area): void {\r\n\t\tlet color = this.p5.color(255, 255, 255, 178);\r\n\t\tif (this.tool == \"test\") {\r\n\t\t\tcolor = this.p5.color(255, 0);\r\n\t\t}\r\n\t\tif (((this.tool == \"delete\" || this.tool == \"select\") &&\r\n\t\t\tthis.mouseIsHoverSketch() &&\r\n\t\t\tarea == this.hoveredArea) ||\r\n\t\t\tthis.selection.containsArea(area)\r\n\t\t) {\r\n\t\t\tcolor = this.p5.color(255, 200, 200, 178); // highlight (set color red)\r\n\t\t}\r\n\t\tthis.p5.fill(color);\r\n\t\tthis.p5.strokeWeight(1 / this.view.scale);\r\n\t\tif (this.tool == \"test\") {\r\n\t\t\tthis.p5.noStroke();\r\n\t\t} else {\r\n\t\t\tthis.p5.stroke(0);\r\n\t\t}\r\n\t}\r\n\r\n\tsetTempArea(coord: Coord): void {\r\n\t\tlet coords = [coord];\r\n\t\tswitch (this.tool) {\r\n\t\t\tcase \"rectangle\":\r\n\t\t\t\tthis.tempArea = new AreaRect(coords);\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"circle\":\r\n\t\t\t\tthis.tempArea = new AreaCircle(coords);\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"polygon\":\r\n\t\t\t\tthis.tempArea = new AreaPoly(coords);\r\n\t\t\t\tthis.tempArea.addCoord(coord);\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n\r\n\tupdateTempArea(): void {\r\n\t\tlet coord = this.drawingCoord();\r\n\t\tif (!this.tempArea.isEmpty()) {\r\n\t\t\tthis.tempArea.updateLastCoord(coord);\r\n\t\t}\r\n\t}\r\n\r\n\texportMap(): string {\r\n\t\treturn JSON.stringify(new Save(version, this.map), function (key, value) {\r\n\t\t\tif (value instanceof ImageMap && !(this instanceof Save)) {\r\n\t\t\t\treturn value.getName();\r\n\t\t\t}\r\n\t\t\treturn value;\r\n\t\t});\r\n\t}\r\n\r\n\tsave(): void {\r\n\t\t//@ts-ignore encoding options for Chrome\r\n\t\tlet blob = new Blob([this.exportMap()], { encoding: \"UTF-8\", type: \"text/plain;charset=UTF-8\" })\r\n\t\tdownload(blob, `${this.map.getName()}.map.json`, 'application/json')\r\n\t}\r\n\r\n\timportMap(json: string): void {\r\n\t\tlet object = JSON.parse(json);\r\n\t\tlet objectMap = object.map;\r\n\t\tthis.map.setFromObject(objectMap);\r\n\t\tthis.settings.setValue(\"Map Name\", objectMap.name);\r\n\t\tthis.settings.setValue(\"Default Area\", objectMap.hasDefaultArea);\r\n\t\tthis.reset();\r\n\t}\r\n\r\n\t/**\r\n\t * Add an area to the imageMap object\r\n\t */\r\n\tcreateArea(area: Area): void {\r\n\t\tthis.map.addArea(area);\r\n\t\tthis.undoManager.add({\r\n\t\t\tundo: () => area = this.map.shiftArea()!,\r\n\t\t\tredo: () => this.map.addArea(area, false),\r\n\t\t});\r\n\t}\r\n\r\n\t/**\r\n\t * remove an area from the imageMap object\r\n\t */\r\n\tdeleteArea(area: Area): void {\r\n\t\tlet id = area.id;\r\n\t\tif (id === 0) {\r\n\t\t\tthis.settings.setValue(\"Default Area\", false);\r\n\t\t} else {\r\n\t\t\tlet index = this.map.rmvArea(id);\r\n\t\t\tthis.undoManager.add({\r\n\t\t\t\tundo: () => this.map.insertArea(area, index),\r\n\t\t\t\tredo: () => this.map.rmvArea(id),\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Move an area forward or backward\r\n\t */\r\n\tmoveArea(area: Area, direction: number): void {\r\n\t\tif (this.map.moveArea(area.id, direction) !== false) {\r\n\t\t\tthis.undoManager.add({\r\n\t\t\t\tundo: () => this.map.moveArea(area.id, -direction),\r\n\t\t\t\tredo: () => this.map.moveArea(area.id, direction),\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Set the url of an area\r\n\t */\r\n\tsetAreaUrl(area: Area): void {\r\n\t\tlet href = area.getHref();\r\n\t\tlet input = prompt(\"Enter the pointing url of this area\", href ? href : \"http://\");\r\n\t\tif (input) {\r\n\t\t\tarea.setHref(input);\r\n\t\t\tthis.undoManager.add({\r\n\t\t\t\tundo: () => area.setHref(href),\r\n\t\t\t\tredo: () => area.setHref(input!),\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Set the title of an area\r\n\t */\r\n\tsetAreaTitle(area: Area): void {\r\n\t\tlet title = area.getTitle();\r\n\t\tlet input = prompt(\"Enter the title of this area\", title ? title : \"\");\r\n\t\tif (input) {\r\n\t\t\tarea.setTitle(input);\r\n\t\t\tthis.undoManager.add({\r\n\t\t\t\tundo: () => area.setTitle(title),\r\n\t\t\t\tredo: () => area.setTitle(input!),\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tsetDefaultArea(bool: boolean): void {\r\n\t\tthis.map.setDefaultArea(bool);\r\n\t\tthis.undoManager.add({\r\n\t\t\tundo: () => {\r\n\t\t\t\tthis.map.setDefaultArea(!bool); // semble redondant\r\n\t\t\t\tthis.settings.setValue(\"Default Area\", !bool)\r\n\t\t\t},\r\n\t\t\tredo: () => {\r\n\t\t\t\tthis.map.setDefaultArea(bool); // semble redondant\r\n\t\t\t\tthis.settings.setValue(\"Default Area\", bool)\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tclearAreas(): void {\r\n\t\tlet areas = this.map.getAreas(false);\r\n\t\tthis.map.clearAreas();\r\n\t\tthis.undoManager.add({\r\n\t\t\tundo: () => this.map.setAreas(areas),\r\n\t\t\tredo: () => this.map.clearAreas(),\r\n\t\t});\r\n\t}\r\n\r\n\treset(): void {\r\n\t\tthis.undoManager.clear();\r\n\t}\r\n}\r\n\r\n//@ts-ignore add imageMapCreator to the global scope\r\nglobalThis.imageMapCreator = imageMapCreator;\r\n"],
  "mappings": "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",
  "names": ["require_download", "__commonJSMin", "exports", "module", "root", "factory", "download", "data", "strFileName", "strMimeType", "self", "defaultMime", "mimeType", "payload", "url", "anchor", "toString", "a", "myBlob", "fileName", "blob", "reader", "ajax", "e", "dataUrlToBlob", "saver", "i", "tempUiArr", "mx", "strUrl", "parts", "type", "decoder", "binData", "uiArr", "winMode", "f", "y", "require_undomanager", "__commonJSMin", "exports", "module", "removeFromTo", "array", "from", "to", "UndoManager", "commands", "index", "limit", "isExecuting", "callback", "execute", "command", "action", "callbackFunc", "groupId", "prev_size", "c", "max", "require_quicksettings_min", "__commonJSMin", "exports", "module", "a", "b", "d", "c", "e", "f", "g", "i", "h", "j", "k", "l", "m", "n", "o", "require_contextmenu", "__commonJSMin", "exports", "module", "conf", "isOpen", "target", "menuClassName", "itemClassName", "itemClassNameDisabled", "isFunction", "obj", "isString", "extend", "length", "idx", "source", "key", "getElements", "selector", "elements", "onContextMenu", "e", "closeContextMenu", "menu", "createContextMenu", "positionContextMenu", "contextMenu", "value", "item", "onSelect", "left", "top", "targetBox", "menuBox", "position", "setEnabledState", "enabled", "normalizeMenu", "itemDefaults", "dflt", "ContextMenu", "options", "box", "evt", "version", "round", "x", "digits", "openWindow", "url", "width", "height", "Coord", "_Coord", "x", "y", "obj", "coord1", "coord2", "val", "tmp", "coord", "dec", "scale", "round", "Area", "shape", "coords", "href", "title", "id", "o", "r", "AreaRect", "Coord", "c", "AreaCircle", "p", "AreaPoly", "d", "AreaDefault", "coord", "area", "copy", "val", "index", "fcoord", "move", "tolerance", "point", "url", "dec", "scale", "htmlCoords", "i", "AreaEmpty", "radius", "center", "p5", "round", "x", "y", "closed", "cornersX", "cornersY", "j", "oddNodes", "polyX", "polyY", "dist", "iMap", "ImageMap", "width", "height", "areas", "name", "hasDefaultArea", "AreaDefault", "obj", "iMap", "Area", "bool", "all", "area", "setId", "id", "index", "direction", "nextIndex", "a", "scale", "k", "str", "length", "result", "characters", "charactersLength", "counter", "BgLayer", "iMap", "speed", "alpha", "over", "Selection", "Coord", "coord", "area", "p", "point", "prev", "nb", "c", "move", "import_downloadjs", "import_undo_manager", "import_quicksettings", "ContextMenu", "Save", "version", "map", "imageMapCreator", "elementId", "width", "height", "target", "key", "item", "area", "element", "AreaEmpty", "Selection", "ImageMap", "UndoManager", "BgLayer", "p5", "QuickSettings", "v", "e", "coord", "areaPoly", "selection", "move", "coefZoom", "Coord", "a", "point", "event", "openWindow", "evt", "file", "img", "res", "blob", "reader", "json", "xScale", "yScale", "coef", "newScale", "mouseXToOrigin", "mouseYToOrigin", "transX", "transY", "allAreas", "i", "value", "href", "color", "coords", "AreaRect", "AreaCircle", "AreaPoly", "download", "objectMap", "id", "index", "direction", "input", "title", "bool", "areas"]
}
